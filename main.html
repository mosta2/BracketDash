<!DOCTYPE html>
<!-- CSP support mode (required for Windows Universal apps): https://docs.angularjs.org/api/ng/directive/ngCsp -->
<html lang="en" ng-app="app" ng-csp>
<head>
    <meta charset="utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />

    <!-- JS dependencies (order matters!) -->
    <script src="scripts/platformOverrides.js"></script>
    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular/angular-animate.min.js"></script>
    <script src="lib/angular/angular-sanitize.js"></script>
    <script src="lib/onsen/js/onsenui.js"></script>
    <!-- CSS dependencies -->
    <link rel="stylesheet" href="lib/onsen/css/onsenui.css" />
    <link rel="stylesheet" href="lib/onsen/css/onsen-css-components.css" />

    <!-- CSP support mode (required for Windows Universal apps) -->
    <link rel="stylesheet" href="lib/angular/angular-csp.css" />

    <link rel="stylesheet" href="css/BracketDash.css" />
    <link rel="stylesheet" href="css/mobile-activity.css" />
    <link rel="stylesheet" href="lib/angular/ng-animation.css" />
    <link rel="stylesheet" href="css/cropit.css" />
    
    <!-- -- ------------- App init --------------- -->

    <title>BracketDash</title>

    <script src="cordova.js"></script>
    <script src="scripts/FileTransfer.js"></script>
    <script src="scripts/FileTransferError.js"></script>
    
    <script src="scripts/jquery.js"></script>
    <script src="scripts/BracketDash.js"></script>
    <script src="scripts/index.js"></script>
    <!--<script src="scripts/transloadit.js"></script>-->
    <script src="scripts/transloadit.jquery.js"></script>
    <script src="scripts/cropit.js"></script>

</head>

<body id="body" ng-controller="BracketDashController as bd">
    <div id="divOverlay" class="ng-hide slide-right"></div>
    <ons-modal var="modloading" ng-show="isloading" >
        <ons-icon icon="ion-load-c" style="color:#FFF" spin="true"></ons-icon>
        <br>
        <br><span style="color:#FFF" > Loading Please wait.</span>
        <br>
    </ons-modal>
    <script type="text/ons-template" id="dialog.html" >
        <ons-dialog cancelable ons-prehide="bd.closevideo($event)">
            <!--<span style="color:#FFF">
                <video width="320" height="240" controls>
                    <source src="{{isplaying}}" type="video/mp4">
                </video>
            </span>-->

            <iframe style="margin: 0px; padding: 0px; border: medium none; display: block;" allowfullscreen="" id="iframe" 
                    frameborder="0"></iframe>

            <div class="tab-bar" style="z-index:1000" ng-if="isplaying == uploadedurl">
                <label class="tab-bar__item btnaccept" ng-click="confirmupload('finish')">
                    <input type="radio" name="tab-bar-a">
                    <button class="tab-bar__button">
                        <i class="tab-bar__icon fa fa-check"></i>
                        <div class="tab-bar__label"><span>{{uploadcreateactivity? 'Add Activity' : 'Add Response' }}</span></div>
                    </button>
                </label>

                <label class="tab-bar__item btndecline" ng-click="confirmupload('delete')">
                    <input type="radio" name="tab-bar-a">
                    <button class="tab-bar__button">
                        <i class="tab-bar__icon fa fa-times"></i>
                        <div class="tab-bar__label">Delete</div>
                    </button>
                </label>

            </div>

        </ons-dialog>
    </script>

    <script type="text/ons-template" id="dialogpreview.html">
        <ons-dialog ons-prehide="bd.closevideo($event)"  style="min-height:200px">
            <!--<span style="color:#FFF">
                <video width="320" height="240" controls>
                    <source src="{{isplaying}}" type="video/mp4">
                </video>
            </span>-->

            <iframe style="margin: 0px; padding: 0px; border: medium none; display: block;" allowfullscreen="" id="iframepreview"
                    frameborder="0"></iframe>

            <div class="tab-bar" style="z-index:1000" ng-if="isplaying == uploadedurl">
                <label class="tab-bar__item btnaccept" ng-click="confirmupload('finish')">
                    <input type="radio" name="tab-bar-a">
                    <button class="tab-bar__button">
                        <i class="tab-bar__icon fa fa-check"></i>
                        <div class="tab-bar__label"><span>{{uploadcreateactivity? 'Add Activity' : uploadcreateresponse? 'Add Response' : 'Add Progress' }}</span></div>
                    </button>
                </label>

                <label class="tab-bar__item btndecline" ng-click="confirmupload('delete')">
                    <input type="radio" name="tab-bar-a">
                    <button class="tab-bar__button">
                        <i class="tab-bar__icon fa fa-times"></i>
                        <div class="tab-bar__label">Delete</div>
                    </button>
                </label>

            </div>

        </ons-dialog>
    </script>


    <script type="text/ons-template" id="dialogprofilepic.html">
        <ons-dialog cancelable  ons-postshow="showcropit($event)" >
            
            <!--<div>
                <img id="image" src="{{bd.userinfo.Avatar_link}}" style="max-width:100%">
                <button ng-click="getCroppedCanvas()" type="button" class="btn btn-primary">
                    <span  class="docs-tooltip" data-toggle="tooltip" title="">
                        Get Cropped Canvas
                    </span>
                </button>
                {{croppeddata}}
            </div>-->

            <div class="upload-picture-wrapper"><div class="upload-profile-photo-header">Upload Profile Photo</div>
            <div class="image-editor" id="image-editor"><div class="cropit-preview cropit-image-loading" style="position: relative; width: 150px; height: 150px;">
                <div class="cropit-preview-background-container" style="position: absolute; z-index: 0; top: -10px; right: -10px; bottom: -10px; left: -10px; overflow: hidden;">
                <img class="cropit-preview-background" alt="" style="position: relative; left: 10px; top: 10px; transform-origin: left top 0px; will-change: transform;"></div>
                <div class="cropit-preview-image-container" style="position: absolute; overflow: hidden; left: 0px; top: 0px; width: 100%; height: 100%;">
                <img class="cropit-preview-image" alt="" style="transform-origin: left top 0px; will-change: transform;"></div></div>
                <div class="resize-image-wrapper"><div class="image-size-label">Resize image</div>
                <input type="range" class="cropit-image-zoom-input" min="0" max="1" step="0.01"></div><div class="rotate-image-buttons">
                <div class="rotate-ccw"><i class="fa fa-undo"></i></div><div class="rotate-cw"><i class="fa fa-repeat"></i></div></div>
               <button  ng-if="version44" ng-click="selectprofilepic()" style="height:30px;">Choose File.</button>
                <button ng-if="!version44" class="upload">Select Image</button>
                <input type="file" class="cropit-image-input" accept="image/*"><button class="export">Save</button><button class="cancel pull-right" ng-click="dialogprofilepic.hide()">Cancel</button></div>
            
                <!--<div>
                    <img id="image" src="picture.jpg">
                </div><button ng-click="getCroppedCanvas()"> Save </button>-->

            </div>
            
             <div class="tab-bar" style="z-index:1000" ng-if="isplaying == uploadedurl">
                <label class="tab-bar__item btnaccept" ng-click="confirmupload('finish')">
                    <input type="radio" name="tab-bar-a">
                    <button class="tab-bar__button">
                        <i class="tab-bar__icon fa fa-check"></i>
                        <div class="tab-bar__label"><span>{{uploadcreateactivity? 'Add Activity' : 'Add Response' }}</span></div>
                    </button>
                </label>

                <label class="tab-bar__item btndecline" ng-click="confirmupload('delete')">
                    <input type="radio" name="tab-bar-a">
                    <button class="tab-bar__button">
                        <i class="tab-bar__icon fa fa-times"></i>
                        <div class="tab-bar__label">Delete</div>
                    </button>
                </label>

            </div>

        </ons-dialog>
    </script>

        <script type="text/ons-template" id="dialoguserselect.html">
        <ons-dialog cancelable >
            <ons-list>

                <ons-list-header>
                    <div style="width:80%;display:inline;float:left;">
                        <input type="text" class="text-input" ng-model="searchuserquery.q" style="width:80%;float:right;display:inline;" placeholder="search for users">
                    </div>
                    <div style="width:20%;float:right;">
                        <button class="ng-hide" ng-click="searchuser(searchuserquery.q)"><ons-icon icon="fa-search"></ons-icon></button>
                    </div>
                </ons-list-header>
                <div ng-if="NewActivity.type == 'battle' && NewActivity.contestants.length >0 ">
                    <ons-list class="userlist" modifier="inset" >
                        <ons-list-item value="{{ user.Username }}" ng-repeat="user in NewActivity.contestants" modifier="tappable">
                            <label class="checkbox checkbox--noborder">
                                <input type="checkbox" ng-model="user.selected" ng-change="checkuser($event,user)">
                                <div style="float:left;width:20%" class="checkbox__checkmark checkbox--noborder__checkmark"></div>
                                <div style="float:left; width:80%; max-width:80%;" ng-click=>
                                    <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar"></div>
                                    <div style="max-width:60%;float:left">
                                        {{user.Fullname}}
                                        <span class="subtext"> {{user.Username}}</span>
                                    </div>
                                </div>

                            </label>

                        </ons-list-item>
                    </ons-list>
                    <hr />

                </div>
                <div ng-if="NewActivity.type == 'bracket' && NewActivity.branches[currentbranchuser.branch_no].contestants[currentbranchuser.userindex].Username.length >0 ">
                     <ons-list class="userlist" modifier="inset">
                        <ons-list-item value="{{ NewActivity.branches[currentbranchuser.branch_no].contestants[currentbranchuser.userindex].Username }}"  modifier="tappable">
                            <label class="checkbox checkbox--noborder">
                                <input type="checkbox" ng-model="NewActivity.branches[currentbranchuser.branch_no].contestants[currentbranchuser.userindex].selected" ng-change="checkuser($event,user)">
                                <div style="float:left;width:20%" class="checkbox__checkmark checkbox--noborder__checkmark"></div>
                                <div style="float:left; width:80%; max-width:80%;" ng-click=>
                                    <div style="width:40%;float:left">  <img src="{{NewActivity.branches[currentbranchuser.branch_no].contestants[currentbranchuser.userindex].Avatar_link}}" class="avatar"></div>
                                    <div style="max-width:60%;float:left">
                                        {{NewActivity.branches[currentbranchuser.branch_no].contestants[currentbranchuser.userindex].Fullname}}
                                        <span class="subtext"> {{NewActivity.branches[currentbranchuser.branch_no].contestants[currentbranchuser.userindex].Username}}</span>
                                    </div>
                                </div>

                            </label>

                        </ons-list-item>
                    </ons-list>
                    <hr />

                </div>

                 <ons-list class="userlist" modifier="inset" >
                    <ons-list-item value="{{ user.Username }}" ng-repeat="user in usersearchresult" modifier="tappable">
                        <label class="checkbox checkbox--noborder">
                            <input type="checkbox" ng-model="user.selected" ng-change="checkuser($event,user)">
                            <div style="float:left;width:20%" class="checkbox__checkmark checkbox--noborder__checkmark"></div>
                            <div style="float:left; width:80%; max-width:80%;" ng-click=>
                                <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar"></div>
                                <div style="max-width:60%;float:left">
                                    {{user.Fullname}}
                                    <span class="subtext"> {{user.Username}}</span>
                                </div>
                            </div>

                        </label>

                    </ons-list-item>
                </ons-list>


            </ons-list>


        </ons-dialog>
    </script>

    <script type="text/ons-template" id="dialogcategory.html">
        <ons-dialog cancelable>
            <ons-list>

                <ons-list-header>Select Category</ons-list-header>

                <ons-list-item modifier="tappable" ng-repeat="option in cats">
                    <label class="radio-button radio-button--list-item">
                        
                        <input type="radio" name="a" ng-model="NewActivity.category" value="{{ option }}" ng-click="dialogcategory.hide($event)">
                        <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                        {{ option }}
                    </label>
                </ons-list-item>

            </ons-list>

        </ons-dialog>
    </script>

    <script type="text/ons-template" id="dialogduration.html">
        <ons-dialog cancelable>
            <ons-list style="max-height:300px">

                <ons-list-header>Select Duration</ons-list-header>
                <ons-list-item  >
                    <div style="float:left"><ons-icon id="icncancelsearch" icon="fa-angle-left" ng-click="setdurationtype(-1)" size="28px"
          fixed-width="false"></div>
                    <div style="float:left;width:92%" class="centered">{{durationtype}}</div>
                    <div  style="float:right"><ons-icon id="icncancelsearch" icon="fa-angle-right" ng-click="setdurationtype(1)" size="28px"
           fixed-width="false"></div>
               </ons-list-item>
                
                <ons-list-item modifier="tappable" class="centered" ng-repeat="number in selectdurationnumber" ng-click="setduration(number)">
                    <label class="radio-button radio-button--list-item centered">

                        <input type="radio" name="a" ng-model="durationnumber" value="{{ number }}" >
                        <div class="radio-button__checkmark radio-button--list-item__checkmark "></div>
                        {{ number }}
                    </label>
                </ons-list-item>

            </ons-list>

        </ons-dialog>
    </script>

    <script type="text/ons-template" id="dialogusertomessage.html">
        <ons-dialog cancelable>
            <ons-list>
                <ons-list-header>
                    <div style="width:80%;display:inline;float:left;">
                        <input type="text" class="text-input" ng-model="searchuserquery.q" style="width:80%;float:right;display:inline;" placeholder="search for users">
                    </div>
                    <div style="width:20%;float:right;">
                        <button class="ng-hide" ng-click="searchuser(searchuserquery.q)"><ons-icon icon="fa-search"></ons-icon></button>
                    </div>
                </ons-list-header>
                    <ons-list class="userlist" ng-if="compose.to.length > 0" modifier="inset">
                        <ons-list-item value="{{ user.Username }}" ng-repeat="user in compose.to" modifier="tappable">
                            <label class="checkbox checkbox--noborder">
                                <input type="checkbox" ng-model="user.selected" ng-change="addusertomessage($event,user)">
                                <div style="float:left;width:20%" class="checkbox__checkmark checkbox--noborder__checkmark"></div>
                                <div style="float:left; width:80%; max-width:80%;" ng-click=>
                                    <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar"></div>
                                    <div style="max-width:60%;float:left">
                                        {{user.Fullname}}
                                        <span class="subtext"> {{user.Username}}</span>
                                    </div>
                                </div>
                            </label>
                        </ons-list-item>
                    </ons-list>
                    <hr />

                <ons-list class="userlist" modifier="inset" ng-if="usersearchresult.length > 0">
                    <ons-list-item value="{{ user.Username }}" ng-repeat="user in usersearchresult" modifier="tappable">
                        <label class="checkbox checkbox--noborder">
                            <input type="checkbox" ng-model="user.selected" ng-change="addusertomessage($event,user)">
                            <div style="float:left;width:20%" class="checkbox__checkmark checkbox--noborder__checkmark"></div>
                            <div style="float:left; width:80%; max-width:80%;" ng-click=>
                                <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar"></div>
                                <div style="max-width:60%;float:left">
                                    {{user.Fullname}}
                                    <span class="subtext"> {{user.Username}}</span>
                                </div>
                            </div>
                        </label>
                    </ons-list-item>
                </ons-list>


            </ons-list>


        </ons-dialog>
    </script>

    <script type="text/ons-template" id="dialogvisibility.html">
        <ons-dialog cancelable>
            <ons-list>

                <ons-list-header>Select Visibility</ons-list-header>

                <ons-list-item modifier="tappable" ng-repeat="option in visibilityoptions">
                    <label class="radio-button radio-button--list-item">
                        <input type="radio" name="a" ng-model="NewActivity.visibility" value="{{ option }}" ng-click="dialogvisibility.hide($event)">
                        <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                        {{ option }}
                    </label>
                </ons-list-item>

            </ons-list>


        </ons-dialog>
    </script>

    <script type="text/ons-template" id="dialogbranchlength.html">
        <ons-dialog cancelable>
            <ons-list>
                <ons-list-header>
                    Select the number of contestants
                </ons-list-header>
                <ons-list-item style="min-height:50px" modifier="tappable">
                    <ons-list-item>

                        <ons-list-item style="min-height:50px" modifier="tappable" ng-repeat="len in branchlength">
                            <label class="radio-button radio-button--list-item">
                                <input type="radio" name="a" ng-model="NewActivity.branchlength" value="{{ len }}">
                                <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                                {{ len }}
                            </label>
                        </ons-list-item>

            </ons-list>

        </ons-dialog>
    </script>
    

    <script type="text/ons-template" id="dialogpassword.html">
        <ons-dialog cancelable>

            <div class="account-settings-wrapper">
                <div class="header">
                    Please enter your password to confirm.
                </div>
                <form novalidate="novalidate" class="edit-email-form">
                    <br><br><input type="password" class="text-input--underbar txtsignup" name="password" placeholder="" ng-model="changesettings.confirmpassword" >
                    <br><br>
                    <ons-button modifier="large"  class="login-button btnsecond" style="width:80%;"
                                ng-click="changesetting()">Confirm</ons-button>

                </form>
            </div>
            
        </ons-dialog>
    </script>


    <script type="text/ons-template" id="dialogcomment.html" >
        <ons-dialog cancelable ons-prehide="bd.hidecomments(currentfeed.activity_id)">

            <div class="commentcontainer" ng-show="currentfeed.activity_id">
                <div class="tab-bar tab-bar--top">
                    <label class="tab-bar__item">
                        <input type="radio" name="tab-bar-c" ng-model="currentfeed.mode" value="1" checked="checked">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Comments</div>
                        </button>
                    </label>

                    <label ng-show="bd.isloggedin" class="tab-bar__item" ng-if="currentfeed.activity_host_info.username != bd.userinfo.Username">
                        <input type="radio" name="tab-bar-c" ng-model="currentfeed.mode" value="2">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Report</div>
                        </button>
                    </label>

                    <label class="tab-bar__item" ng-show="currentfeed.activity_type=='challenge' && bd.isloggedin">
                        <input type="radio" name="tab-bar-c"  ng-model="currentfeed.mode" value="3">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Respond</div>
                        </button>
                    </label>
                    <label  class="tab-bar__item" ng-if="currentfeed.activity_host_info.username == bd.userinfo.Username">
                        <input type="radio" name="tab-bar-c"  ng-model="currentfeed.mode" value="4">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Delete</div>
                        </button>
                    </label>
                    <label class="tab-bar__item" ng-if="currentfeed.activity_host_info.username == bd.userinfo.Username && currentfeed.activity_status=='expired'
                           && currentfeed.activity_type=='bracket' && currentfeed.next_round_status !='launched'">
                        <input type="radio" name="tab-bar-c" ng-model="currentfeed.mode" value="5">
                        <button class="tab-bar__button">
                            
                            <div class="tab-bar__label" style="font-size:small;">Launch Next</div>
                        </button>
                    </label>
                </div>
     
                <ons-scroller style="height: 70%; width: 100%">
                    

                    <div ng-show="currentfeed.mode ==1" ng-attr-id="{{'comments' + currentfeed.activity_id}}">
                        <div class="options-content-wrapper">
                            <div class="comment-input-wrapper">
                                <div >
                                <!--<ons-col class="smallcolumn"  ><div class="comment-input-avatar comment-avatar">
    <img class="avatar" src="{{bd.userinfo.Avatar_link
}}">
</div>
                                    </ons-col>-->
                                    <div class="pull-left" >
                                        <textarea data-id="5" ng-model="newcomment.text" class="comment-input" placeholder="comment..."></textarea>
                                    </div>
                                    <div class="pull-left smallcolumn" style="margin-left:10px">
                                        
                                        <div><button ng-show="bd.isloggedin" class="btnsmall button button--material btnsecond pull-right" ng-click="savecomment()">Post</button></div>
                                    </div>
                                    <div><button ng-show="!bd.isloggedin" class="btnsmall button button--material btnsecond pull-right" ng-click="requestlogin()">Login & Post</button></div>

                                </div>
                            </div>
                            <div class="comment-section-wrapper">
                                <div class="comment-wrapper">
                                    <div ng-repeat="comment in currentfeed.comments.obj" style="width:100%">
                                            <div class="comment-avatar" style="float:left" >
                                                <img class="avatar" src="{{comment.avatar}}">
                                            </div>

                                            <div style="float:left">
                                                <div class="commentoor">
                                                    <span style="font-size: 10px;">{{comment.username}}</span>
                                                    <span style="font-size: 10px;" class="comment-date subtext">{{comment.date}}</span>
                                                </div>
                                            </div>
                                            <div style="position:relative;">

                                                <div class="comment-text-wrapper" style="padding-top:15px;">
                                                    <div class="comment-text">{{comment.comment}}</div>
                                                </div>
                                                <div class="report-comment" ng-if="comment.username != bd.userinfo.Username" ng-click="reportcomment(comment.comment_id)" data-comment-id="3"><ons-icon icon="fa-bolt"></ons-icon></div>
                                                <div class="report-comment" ng-if="comment.username == bd.userinfo.Username" ng-click="deletecomment(comment.comment_id)" data-comment-id="3"><ons-icon icon="fa-minus-circle"></ons-icon></div>
                                            </div>

                                            
                                       
                                    </div>
                                    <div style="text-align:center; margin-top:20px;" ng-if="currentfeed.comments.status  && currentfeed.comments.status != 'complete'">
                                    <ons-button class="btnsmall button button--material btnsecond" ng-click="bd.getcomments(currentfeed.activity_id,feedlimit+10)">Load more</ons-button>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>
                    <div ng-show="currentfeed.mode ==2" ng-attr-id="{{'reports' + currentfeed.activity_id}}">
                        <div class="comment-input-wrapper">
                            <!--<ons-row>
                                <ons-col class="smallcolumn">
                                    <div class="comment-input-avatar comment-avatar">
                                        <img class="avatar" src="{{bd.userinfo.Avatar_link}}">
                                    </div>
                                </ons-col>
                                <ons-col>
                                        <textarea data-id="5" ng-model="newreport.text" class="comment-input" placeholder="explain what is wrong with this activity..."></textarea>
                                    
                                </ons-col>
                            </ons-row>-->
                            <div style="margin-left:60px;"><button class="btnsmall button button--material btnsecond btnwide" ng-click="savereport(currentfeed.activity_id)">Report</button></div>
                        </div>

                    </div>
                    <div ng-show="currentfeed.mode ==3" ng-attr-id="{{'reports' + currentfeed.activity_id}}">
                        <div class="comment-input-wrapper">
                            <div class="container" ng-show="isuploading !=1">
                                <form ng-if="!version44" style="width: 100%;" id="upload-form" action="/uploads" enctype="multipart/form-data" method="POST">
                                    <input  type="file" accept="video/*" class="cropit-image-input" id="inputuploadresponse" onchange="angular.element(this).scope().setFiles(this,false,true,'response')" />
                                    <ons-botton  style="width: auto;" ng-if="!version44 && !file" id="btnuploadresponse" class="button button--material btnsecond btnwide" 
                                                ng-click="triggerresponseupload()">
                                        Select Video</ons-botton>

</form>
                               <button ng-if="version44 && !file"  ng-click="selectfile()" style="height:30px;">Choose File.</button>
                                <button ng-show="file && uploadbutton" class="button btnsmall" ng-click="addresponse(currentfeed.activity_id)">Upload {{file}}</button>
                                <button ng-show="file && !uploadbutton" class="button btnsmall">{{file}}</button>
                            </div>
                            <div class="container" ng-show="isuploading ==1">
                                There is an upload in progress please come back later.
                            </div>
                           
                        </div>
                                        </div>
                    <div ng-show="currentfeed.mode ==4" ng-attr-id="{{'reports' + currentfeed.activity_id}}">
                        <div class="centered">
                                Are you sure you want to delete '{{currentfeed.title}}'?
                            <ons-button class="btnsmall button button--material btnsecond" ng-click="bd.deleteactivity(currentfeed.activity_id)">Delete</ons-button>
                        </div>

                    </div>
                    <div ng-show="currentfeed.mode ==5" >
                        <div class="centered">
                            <br>
                            Are you sure you want to launch next round for '{{currentfeed.activity_title}}'?
                            <br><br>
                            <ons-button class="btnsmall button button--material btnsecond" ng-click="bd.launchnextround(currentfeed.activity_id)">Launch next round</ons-button>
                            <br>
                        </div>

                    </div>
                </ons-scroller>
            </div>

            <script>
          
            </script>
</ons-dialog>
</script>

    <script type="text/ons-template" id="dialoginprogress.html">
        <ons-dialog cancelable >
            <div class="commentcontainer" ng-show="currentprogressfeed.activity_id">
                <div class="tab-bar tab-bar--top">
                    <label class="tab-bar__item" >
                        <input type="radio" name="tab-bar-c" ng-model="currentprogressfeed.mode" value="1" checked="checked"
                               ng-if="currentprogressfeed.activity_host_info.username == bd.userinfo.Username">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Launch</div>
                        </button>
                    </label>
                    <label ng-show="bd.isloggedin" class="tab-bar__item" ng-if="currentprogressfeed.activity_host_info.username != bd.userinfo.Username">
                        <input type="radio" name="tab-bar-c" ng-model="currentprogressfeed.mode" value="2">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Quit</div>
                        </button>
                    </label>
                    <label class="tab-bar__item" ng-if="currentprogressfeed.activity_host_info.username == bd.userinfo.Username && 1==2">
                        <input type="radio" name="tab-bar-c" ng-model="currentprogressfeed.mode" value="3">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Edit</div>
                        </button>
                    </label>
                    <label class="tab-bar__item" ng-if="currentprogressfeed.activity_host_info.username == bd.userinfo.Username">
                        <input type="radio" name="tab-bar-c" ng-model="currentprogressfeed.mode" value="4">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Delete</div>
                        </button>
                    </label>
                </div>

                <ons-scroller style="height: 70%; width: 100%">
                    <div ng-show="currentprogressfeed.mode ==1">
                        <div class="options-content-wrapper">
                            <div class="comment-input-wrapper">
                                <div ng-show="currentprogressfeed.progress_state=='ready'">
                                  
                                    All contestants have uploaded their video.
                                    This activity is ready for launch!
                                    
                                </div>

                                <div ng-show="currentprogressfeed.progress_state!='ready'">

                                    All contestants have not uploaded their video yet.
                                    This activity is not ready for launch!

                                </div>

                                <br />
                                <ons-botton  ng-disabled="currentprogressfeed.progress_state!='ready'" class="button button--material btnsecond btnwide centered" modified="small" ng-click="bd.launchactivity(currentprogressfeed.activity_id)">
                                    <div style="text-align:center">Launch</div>
                                </ons-botton>
                                <br />
                                <br />
                            </div>
                     
                        </div>
                    </div>
                    <div ng-show="currentprogressfeed.mode ==2">
                        <div class="options-content-wrapper">
                            <div class="comment-input-wrapper">
                                <div>

                                    Do you really wish to quit this activity?<br />
                                    Keep in mind this action cannot be undone!
                                    <br />
                                    <ons-botton class="button button--material btnsecond btnwide centered" modified="small" ng-click="quitactivity()">
                                        <div style="text-align:center">Quit</div>
                                    </ons-botton>
                                    <br />
                                    <br />
                                </div>
                            </div>

                        </div>
                    </div>
                    <div ng-show="currentprogressfeed.mode ==3" >
                        
                        

                          
                    </div>
                    <div ng-show="currentprogressfeed.mode ==4" ng-attr-id="{{'reports' + currentprogressfeed.activity_id}}">
                        <div class="centered">
                            Are you sure you want to delete '{{currentprogressfeed.activity_title}}'
                            <ons-button class="btnsmall button button--material btnsecond" ng-click="bd.deleteactivity(currentprogressfeed.activity_id)">Delete</ons-button>
                        </div>

                    </div>
                </ons-scroller>
            </div>

            <script>

            </script>
        </ons-dialog>
    </script>



    <script type="text/ons-template" id="dialogvidoptions.html">
        <ons-dialog cancelable >

            <div class="commentcontainer" ng-show="currentcon.video_id">
                <div class="tab-bar tab-bar--top">
                    <label class="tab-bar__item">
                        <input type="radio" name="tab-bar-c" ng-if="currentcon.contestant_username != self.userinfo.Username" 
                               ng-model="currentvid.mode" value="1" checked="checked">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Report Video</div>
                        </button>
                    </label>

                    <label ng-show="bd.isloggedin" class="tab-bar__item" ng-if="currentcon.contestant_username == self.userinfo.Username">
                        <input type="radio" name="tab-bar-c" ng-model="currentvid.mode" value="2">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Quit</div>
                        </button>
                    </label>

                </div>

                <ons-scroller style="height: 70%; width: 100%">
                    <div ng-show="currentcon.mode ==1" class="centered">
                        <br />
                        <ons-botton class="button button--material btnsecond btnwide centered" modified="small" ng-click="reportvideo()">
                             <div  style="text-align:center">Report Video</div>
                        </ons-botton>
                        <br />
                        <br />
                    </div>
                    <div ng-show="currentcon.mode ==2"  class="centered" >
                        <br />
                        <ons-botton class="button button--material btnsecond btnwide centered" modified="small" ng-click="reportvideo()">
                           <div style="text-align:center">Quit Activity</div>
                        </ons-botton>                        
                        <br />
                        <br />
                    </div>
                </ons-scroller>
            </div>

            <script>

            </script>
        </ons-dialog>
    </script>


    <script type="text/ons-template" id="dialogvidoptionsinprogress.html">
        <ons-dialog cancelable>

            <div class="commentcontainer" ng-show="currentconinprogress.contestant_username">
                <div class="tab-bar tab-bar--top">
                    <label class="tab-bar__item">
                        <input type="radio" name="tab-bar-c" ng-if="currentcon.contestant_username != self.userinfo.Username"
                               ng-model="currentconinprogress.mode" value="1" checked="checked">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Replace User</div>
                        </button>
                    </label>

                </div>

                <ons-scroller style="height: 70%; width: 100%">
                    <div ng-show="currentcon.mode ==1" class="centered">
                        <br />
                        <ons-botton class="button button--material btnsecond btnwide centered" modified="small" ng-click="reportvideo()">
                            <div style="text-align:center">Report Video</div>
                        </ons-botton>
                        <br />
                        <br />
                    </div>
                </ons-scroller>
            </div>

            <script>

            </script>
        </ons-dialog>
    </script>

    <script type="text/ons-template" id="dialoglogintocontinue.html">
        <ons-dialog cancelable ons-posthide="resetloginmode()" >

            <div ng-if="logintocontinue == ''">
                <ons-row><ons-col><button ng-click="setloginmode('login')" class="button button--outline">Login</button></ons-col>
                <ons-col><button ng-click="setloginmode('register')" class="button button--outline">Register</button></ons-col></ons-row>
            </div>
            <div ng-if="logintocontinue == 'login'">
                <div class="login-form">
                    <div class="error" ng-if="loginvalidation.status==false">{{loginvalidation.reason}}</div>
                    <input type="email" class="text-input--underbar" ng-model="loginobj.loginemail" placeholder="Email">
                    <input type="password" class="text-input--underbar" ng-model="loginobj.loginpassword" placeholder="Password">
                    <br><br>
                    <ons-button modifier="large" ng-disabled="loginvalidation.emailstatus < 1 || loginvalidation.passwordstatus < 1" class="login-button" ng-click="login()">Log In</ons-button>
                    <br><br>
                    <ons-button modifier="quiet" ng-click="setloginmode('forgot')" class="forgot-password">Forgot password?</ons-button>
                    <ons-button modifier="quiet" ng-click="setloginmode('register')" class="forgot-password">Register</ons-button>
                </div>
            </div>
            <div ng-if="logintocontinue == 'forgot'">
                <div class="login-form">
                    <input type="email" class="text-input--underbar" ng-model="forgotemail.email" placeholder="Email">

                    <br><br>
                    <ons-button modifier="large" class="login-button" ng-click="forgotpassword()">Send Reset Link</ons-button>
                    <br><br>
                </div>

            </div>

            <div ng-if="logintocontinue == 'register'"> <div class="login-form">
    <div class="error" ng-if="registervalidation.emailstatus<0 || registervalidation.usernamestatus <0 || registervalidation.passwordstatus <0 || registervalidation.passwordconfirmstatus <0 ">{{registervalidation.reason}}</div>
    <input type="text" class="text-input--underbar txtsignup" ng-model="newuser.registerfullname" placeholder="Full Name">
    <input type="text" class="text-input--underbar txtsignup" ng-model="newuser.registerusername" placeholder="Username">
    <ons-icon icon="ion-load-c" class="checkmail" ng-if="checkingusername" spin="true"></ons-icon>
    <input type="email" class="text-input--underbar" ng-model="newuser.registeremail" placeholder="Email">
    <ons-icon icon="ion-load-c" class="checkmail" ng-if="checkingemail" spin="true"></ons-icon>
    <input type="password" class="text-input--underbar" ng-blur="validatepassword()" ng-model="newuser.registerpassword" placeholder="Select Password">
    <input type="password" class="text-input--underbar" ng-blur="validatepasswordconfirm()" ng-model="newuser.registerpasswordconfirm" placeholder="Confirm Password">
    <br><br>
    <ons-button modifier="large" class="login-button" ng-disabled="registervalidation.emailstatus<1 || registervalidation.usernamestatus <1 || registervalidation.passwordstatus <1 || registervalidation.passwordconfirmstatus <1" ng-click="register()">Sign Up</ons-button>
    <br><br>
</div></div>
        </ons-dialog>
    </script>

    <script type="text/ons-template" id="invitationdialog.html">
        <ons-dialog cancelable>

        </ons-dialog>
    </script>


    <script type="text/ons-template" id="dialogaddlink.html">
        <ons-dialog cancelable>
            <div class="centered"><input type="text" class="text-input--underbar" required style="width:95%"
       placeholder="www.yourlink.com" ng-model="newlink.name" value="">
            <br /><Br />
            <ons-botton class="button button--material btnsecond btnwide centered" modified="small"  ng-click="addlink()">Add Link
    </ons-botton>
            <br />
            </div>
        </ons-dialog>
    </script>
        <!-- Cordova reference -->
        <!-- -->
        <ons-toolbar fixed-style style="z-index:1000">
            <div class="left">
                <ons-toolbar-button ng-click="menu.toggle()">
                    <ons-icon icon="ion-navicon" size="28px" fixed-width="false"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div class="center" id="logo"><img ng-click="bd.setMainPage('page1.html', {closeMenu: true},'Home')" ng-show="bd.showlogo()" class="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAtCAYAAADV2ImkAAAKRGlDQ1BJQ0MgUHJvZmlsZQAASA2dlndUFNcXx9/MbC+0XZYiZem9twWkLr1IlSYKy+4CS1nWZRewN0QFIoqICFYkKGLAaCgSK6JYCAgW7AEJIkoMRhEVlczGHPX3Oyf5/U7eH3c+8333nnfn3vvOGQAoASECYQ6sAEC2UCKO9PdmxsUnMPG9AAZEgAM2AHC4uaLQKL9ogK5AXzYzF3WS8V8LAuD1LYBaAK5bBIQzmX/p/+9DkSsSSwCAwtEAOx4/l4tyIcpZ+RKRTJ9EmZ6SKWMYI2MxmiDKqjJO+8Tmf/p8Yk8Z87KFPNRHlrOIl82TcRfKG/OkfJSREJSL8gT8fJRvoKyfJc0WoPwGZXo2n5MLAIYi0yV8bjrK1ihTxNGRbJTnAkCgpH3FKV+xhF+A5gkAO0e0RCxIS5cwjbkmTBtnZxYzgJ+fxZdILMI53EyOmMdk52SLOMIlAHz6ZlkUUJLVlokW2dHG2dHRwtYSLf/n9Y+bn73+GWS9/eTxMuLPnkGMni/al9gvWk4tAKwptDZbvmgpOwFoWw+A6t0vmv4+AOQLAWjt++p7GLJ5SZdIRC5WVvn5+ZYCPtdSVtDP6386fPb8e/jqPEvZeZ9rx/Thp3KkWRKmrKjcnKwcqZiZK+Jw+UyL/x7ifx34VVpf5WEeyU/li/lC9KgYdMoEwjS03UKeQCLIETIFwr/r8L8M+yoHGX6aaxRodR8BPckSKPTRAfJrD8DQyABJ3IPuQJ/7FkKMAbKbF6s99mnuUUb3/7T/YeAy9BXOFaQxZTI7MprJlYrzZIzeCZnBAhKQB3SgBrSAHjAGFsAWOAFX4Al8QRAIA9EgHiwCXJAOsoEY5IPlYA0oAiVgC9gOqsFeUAcaQBM4BtrASXAOXARXwTVwE9wDQ2AUPAOT4DWYgSAID1EhGqQGaUMGkBlkC7Egd8gXCoEioXgoGUqDhJAUWg6tg0qgcqga2g81QN9DJ6Bz0GWoH7oDDUPj0O/QOxiBKTAd1oQNYSuYBXvBwXA0vBBOgxfDS+FCeDNcBdfCR+BW+Bx8Fb4JD8HP4CkEIGSEgeggFggLYSNhSAKSioiRlUgxUonUIk1IB9KNXEeGkAnkLQaHoWGYGAuMKyYAMx/DxSzGrMSUYqoxhzCtmC7MdcwwZhLzEUvFamDNsC7YQGwcNg2bjy3CVmLrsS3YC9ib2FHsaxwOx8AZ4ZxwAbh4XAZuGa4UtxvXjDuL68eN4KbweLwa3gzvhg/Dc/ASfBF+J/4I/gx+AD+Kf0MgE7QJtgQ/QgJBSFhLqCQcJpwmDBDGCDNEBaIB0YUYRuQRlxDLiHXEDmIfcZQ4Q1IkGZHcSNGkDNIaUhWpiXSBdJ/0kkwm65KdyRFkAXk1uYp8lHyJPEx+S1GimFLYlESKlLKZcpBylnKH8pJKpRpSPakJVAl1M7WBep76kPpGjiZnKRcox5NbJVcj1yo3IPdcnihvIO8lv0h+qXyl/HH5PvkJBaKCoQJbgaOwUqFG4YTCoMKUIk3RRjFMMVuxVPGw4mXFJ0p4JUMlXyWeUqHSAaXzSiM0hKZHY9O4tHW0OtoF2igdRzeiB9Iz6CX07+i99EllJWV75RjlAuUa5VPKQwyEYcgIZGQxyhjHGLcY71Q0VbxU+CqbVJpUBlSmVeeoeqryVYtVm1Vvqr5TY6r5qmWqbVVrU3ugjlE3VY9Qz1ffo35BfWIOfY7rHO6c4jnH5tzVgDVMNSI1lmkc0OjRmNLU0vTXFGnu1DyvOaHF0PLUytCq0DqtNa5N03bXFmhXaJ/RfspUZnoxs5hVzC7mpI6GToCOVGe/Tq/OjK6R7nzdtbrNug/0SHosvVS9Cr1OvUl9bf1Q/eX6jfp3DYgGLIN0gx0G3QbThkaGsYYbDNsMnxipGgUaLTVqNLpvTDX2MF5sXGt8wwRnwjLJNNltcs0UNnUwTTetMe0zg80czQRmu836zbHmzuZC81rzQQuKhZdFnkWjxbAlwzLEcq1lm+VzK32rBKutVt1WH60drLOs66zv2SjZBNmstemw+d3W1JZrW2N7w45q52e3yq7d7oW9mT3ffo/9bQeaQ6jDBodOhw+OTo5ixybHcSd9p2SnXU6DLDornFXKuuSMdfZ2XuV80vmti6OLxOWYy2+uFq6Zroddn8w1msufWzd3xE3XjeO2323Ineme7L7PfchDx4PjUevxyFPPk+dZ7znmZeKV4XXE67m3tbfYu8V7mu3CXsE+64P4+PsU+/T6KvnO9632fein65fm1+g36e/gv8z/bAA2IDhga8BgoGYgN7AhcDLIKWhFUFcwJTgquDr4UYhpiDikIxQODQrdFnp/nsE84by2MBAWGLYt7EG4Ufji8B8jcBHhETURjyNtIpdHdkfRopKiDke9jvaOLou+N994vnR+Z4x8TGJMQ8x0rE9seexQnFXcirir8erxgvj2BHxCTEJ9wtQC3wXbF4wmOiQWJd5aaLSwYOHlReqLshadSpJP4iQdT8YmxyYfTn7PCePUcqZSAlN2pUxy2dwd3Gc8T14Fb5zvxi/nj6W6pZanPklzS9uWNp7ukV6ZPiFgC6oFLzICMvZmTGeGZR7MnM2KzWrOJmQnZ58QKgkzhV05WjkFOf0iM1GRaGixy+LtiyfFweL6XCh3YW67hI7+TPVIjaXrpcN57nk1eW/yY/KPFygWCAt6lpgu2bRkbKnf0m+XYZZxl3Uu11m+ZvnwCq8V+1dCK1NWdq7SW1W4anS1/+pDa0hrMtf8tNZ6bfnaV+ti13UUahauLhxZ77++sUiuSFw0uMF1w96NmI2Cjb2b7Dbt3PSxmFd8pcS6pLLkfSm39Mo3Nt9UfTO7OXVzb5lj2Z4tuC3CLbe2emw9VK5YvrR8ZFvottYKZkVxxavtSdsvV9pX7t1B2iHdMVQVUtW+U3/nlp3vq9Orb9Z41zTv0ti1adf0bt7ugT2ee5r2au4t2ftun2Df7f3++1trDWsrD+AO5B14XBdT1/0t69uGevX6kvoPB4UHhw5FHupqcGpoOKxxuKwRbpQ2jh9JPHLtO5/v2pssmvY3M5pLjoKj0qNPv0/+/tax4GOdx1nHm34w+GFXC62luBVqXdI62ZbeNtQe395/IuhEZ4drR8uPlj8ePKlzsuaU8qmy06TThadnzyw9M3VWdHbiXNq5kc6kznvn487f6Iro6r0QfOHSRb+L57u9us9ccrt08rLL5RNXWFfarjpebe1x6Gn5yeGnll7H3tY+p772a87XOvrn9p8e8Bg4d93n+sUbgTeu3px3s//W/Fu3BxMHh27zbj+5k3Xnxd28uzP3Vt/H3i9+oPCg8qHGw9qfTX5uHnIcOjXsM9zzKOrRvRHuyLNfcn95P1r4mPq4ckx7rOGJ7ZOT437j154ueDr6TPRsZqLoV8Vfdz03fv7Db56/9UzGTY6+EL+Y/b30pdrLg6/sX3VOhU89fJ39ema6+I3am0NvWW+738W+G5vJf49/X/XB5EPHx+CP92ezZ2f/AAOY8/wRDtFgAAAACXBIWXMAAAsTAAALEwEAmpwYAAADxGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE1LTAyLTE5VDE1OjM4OjA4PC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTQtMTEtMjdUMTQ6Mjc6MzM8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+Nzc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NzM8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4K7VYZvAAADJtJREFUWAnFWX2MVcUVPzP33nffwsJSXECw2PWjsLtU+0H9QEA2Wm1jtDUxa9KGWNoqYLHVtv/Uj9RLG2qT2rTVWGVbjFSaGF5N2pqotbHdAAW1oHErsCgaWhZQQNFld9++9+6d6e83977lCctHYSNn9368uXPP/ObMb86cM1ctF2moD8N7fGu/Y0RCHNaKKKkR/LA4lBY7YKw81u/7991SLPZEIhqHmdZ2W7MXVy4WCeqV53s6SZQVOxhLckBptUvFalfQ17u/q+vx/iG17e2ezJhhJYrQ5ImLeiKXawfEB5VSk8poHMD0UV63OTzA87ik5Rd7Gyf++Ps9PUXWbZ675EdaeXdZa3xcExRpA0HlXqX0PujeI8a+aU1lk1F244Hevu53quDb2nzpbAPoEwPu+8Y0aa0nDbJlgKkFnFna4wPeo0PJGJgRUL7UcODAEyh+lc8A7AzPD8MkLgFX4ikUKA6JUo044fBa0IUrcF3giX5j/LiGNQ2XL3lKJcW12zofPSjSKUKLFwrs7DFFY4xeQa3tY1GtXlRutIjPox5HnQgaT6V6LfGnUuPFelOyR6KsGjRJGSywMaycWIt/mtgkJokrJqkM4raEPkuAd1s9HSwOlL/C80b/quWyJZejXDuwbZFf1Xm0q/cZY3rGe15PbEweGt/H0WNF9RixO4xSA+hMA8BWrSzQCFqqg4mWp/9UqbxOxRObPv9Frf3ZxoLhGAtamL3AIxiZ1VkAMTbtj2CMRI9VyvssTDK3cern6iafPW3L3jUPDjhLb9niqg938iORspTLf/ytyFobhg3VSlZ7g/VxfEWg9U+VtZNhWTc52DI6QzTut6tvMR1xACvpYImS5Zy9OKGywtxwsNP5Qdy2krCa9nLnKx38xMgZrc1zlizrLjz0OiaixuFU8FQrPnSqpThuEXlHSqV3ah+u8vM7oZu8HhJioABtbXGo/cCVAgph4GlmaQK11oMaAcq0k7Q6R43A43IsWsMu/k1aJVNmXPbtuzZH0b+OBtrHi84QrVCAgVDz0CzGWS0SqaAZ0JmKcT5MnD0Plb0Eni43kuyQStynPO2hO5gW3mRA+6Qy0gIinaXh8eApUuApb9hpH7RPQHjtBeEXrC9hy9yFd2yNopeHm4iO5ASNF6szlEqc4IZubhi4KE3c9JMIZPxrHDy5U3qe7NlQoLPJ6lt14dU3jSr1Bw2ic+do5bcpY69B9Yu0rwPMRE5SuD5aW9HaKCpZ7Ydzlc0v+9RlC297rdDxJtwdbBMN0W8IXAqxitNd7aowvBa+9xFw+CxymEhCtAhO7qzE8aL5SfLMapjxxkOdhW40cO+94AM4cZg0X7q4SQVBO4pv1tqbBheC7tFfY02CoAcJwYPXaC3+nfdBeEdX1/39GT0caFfxML1VEx1efNTfETqRWgJEiCKCZV2cAL59teeGFgXdLzyyY+vaB39uk/ICuL6/aA/M0aAJgKYvKI/3sDWX1vmVhuJNLHcGcPpcQ67olE6Ro4EbNlq15kBZ4cYkXRAAgYsDpHv98g22v7QY3g3OCSCA2tED97QwOhMr5ecxeRdNv+TWC91oRZGzwrAWppKRF1DErWSRnjlzYbB1U8ceif0fAsVj8MdAylDFzX92WYPQLPq0n9PzgYUjB0rYlDsjD+5YGiOzaVNHhaA3b/jlexIny4DzefKW/tq96fwieEGPqPR1rXMWIrCiLD0dgNOmATpuw1K8ecNvthtb+jUm2W6NSK/KZ5oc6zlM651vVe7q9K2Iy9NpE9vZJs6iZ/qlvwHok2S/duGLo4amp1NYUcDxOfQwQHpaAdMFGk7Ezs7HBiW2fwaHdyjPoxFTaqAH9BiQVuvbZt64hYM3IyEwEGeyKqTX46rEyoqJOMNGUhDPMy/Hol6Ad2ji1ILvB1rBWmPE0/4ZWgUtUPjsiAHOwBJxZp3j4nUVVstmL4K/jtZFB1rmLnkRbvh6hHd50IEBFmYdQjyxeZDhvOmzvzlmRADT8UI5L/KoyIQkl2v0BfFx2WE64uTlcgjfVHlHqbTnRikMSDQD0Rn4a203ACJD0VMJmG4M/7QFlm97tjW5sacMeAK0ESyW6Fycy12PRfWrCD/PVDYwCNeHFwacCN9ag+DVlejj16PoFVaMld3tKw8Ro5rqoLIPLnbGcqKkEbDrTxnwvsyyEoZXIc64P7R2agna0YljCp/XicwFgc56qG787UuK7+0cO1jqGxgd9qVvuwGDniwm0boOIxaeFGA0phK+iQmcBT4K8eGVnlJTPwCHMZjkH6zjaFKLnSg4IiR6DMCB56lLx5j4AhTtrBNbQVaLuccWUOIw40TMlvl4rE8KMFQNCdVlugmS7TA4RxjmQlPWc83yJhP3G3WcTwVwC1+ViEtpVICHPuhS8xZr4hDEdolvTgow1bkoBmqWMsB39LNPg5nXIuKfBsP7dKZsplaI1DWdFjqHW7R2TdHmuljUHwZjAL+e/iytyTuHluNWRMdKJwXYtUcbQualF9kWx/84LwxvD6z9GjZlmlA8HCUImPbjs1JZqQ1FKT++aGD/HqoZQIbi22QSnEKaYTnbcsAA28p+OI6+kwfMFiCcdGictDDICZ9dJbK+T+RjVvI6hvdMa334zCQAGWh5V7G4N0ISjDWCeavVWqYD7ES4NGiEZfm2y75RQav/KlvuPWXAhMJhJujsvhdXHMiWst0Zlh9NIuz8AGzc1LZgnCT6EsQOYYIUj44MOtETzRQKzDFvbvvnowdHBDDBuHGjPWC9/2dpjrKejEpGz4R1Z3FFVi4bc7ww2PrCECbvxraylVVHDHDWLmcIB/LEhPlfFCHMXJDfm6ivoL9NFtbFy1kUCduCJ0j7tmBDsZtKswe8/chFtXWm7e+Lw6sA7QYOE7YKyC7SC6u39gA2RgC0jvkgyk5fAI+Mw+/sjOIZs76FAD28XbQ/hZ4WwDOPib0kpnqSbMdkey41Z6RGmhKp3mOemdPt9pgmAex48UfdjUl3JTYTMQGwltC4CCBgSwAHn615avO6jpdSlfd+lAE86O2y5jSnw+7OZOOP+hncwAJMKmBzmyqkAgZeuA1E3K/GZbMKJdz4Bn0VNoZGQCJoQkyLxqLDJhzK2ltRDr9RUEj3092lltm3XopA/U5w9MvcRwFHuTHoqIAlIsEuEdaeeBDFHdtefLgLnQFT0iBoWMBpN0+8JwCMmY0zhZYY2vlBB4C1KtgL/gQs2o7Nv5sBdjp2AhmfY3IdAksOOzYklT+AsL937y5dSkj0HnIE4KqJjgcaUYiivZjmzJr1vTrsrYnbW2OeFkVQbdXM6xbVDbwvDUb0uZ4E81B4DTL4i7Bq5bK9Ne4SpZ4KlABwhb01GDR+Vpvyfa91dvQ5A7g9CbwNcYABknmYe5EGYVCOS4xyrvnOx7DyIUGphwUWq3+Enrf6lRvGqimzm+fc9h+x2L10JvrumIEP8pMBfBoaaQayj7OYu5cmJl/5l4IlDYgVnx0wx+K11g7e/dp6bASS81EEsxwStz8MdECQ8uvQI+cIB5SNsUymRuAz9oSVudrzdyYXe0F+scI3jnSisz5roYqb9bjH/rCJ3aLA4kyhC0OQyns+snkGkM+rJL5z6/qOlw+3bLUhtz+8HIF0PgzPweeqRgRh2KITi0iqH27mAgxUCOdIcVgJYxgpmRiW424kICPXRV0XYfEnQxsW0KZDQKGH8QJ34H1n9iR5IilWlm3b+PC2DCybOqI5f4XImHwYfCMwdj56Oi5rRurgWvBCfUUpRF5OHGDe0VmirMbs3DF1NsfXGDwBZJxYnxamjWkDqE4nDkJ8C0+ABAUqrNkuprICC/BygD2Q0YBtHwGW6vw6z7vSN3LPKCUTiqhDFFXSugS75k2i4Ev8TOQnwVAsBhrwcwt9jxtjVEuzXb5AmBDoJEvdRiW7AOfwdmIqz0Dbyu51k9bCvRjhV6RClEXafOtI8ZFUTQPICcjFSOIKrQHzuUZwIvYhS+JeIQ+TQWvfLovfU1WHTDyPoVWJLYFisD8NTIB8m1ak18I8w4SqoF9v4LoG7zxlDb7TIWR0ejjBjgOW9XxkuP+GI3krtHIu0io3CatA0FytcJXRANtrtC28VbrgDfdBkDWsfhcfFTnj8BVJwz3hxD0maw7C1PtRwX0JReq6EbHMxt5isnX3po4Bp7z6JbTwYW9Q23Dtvf9eqfT3iUFwP3j1A9j1vNqH1XsCh7UrGIHtoMPKUileEUlnHKEDOIDBrsYX2x0YczAL053WFFVSNnk/icu7kAzvzo1t3Nf13AP4jpkJLZp+awYFOqulx73+D/Hg4ThSZmcuAAAAAElFTkSuQmCC"></div>
            <div class="right" style="position:relative;">
               
                    <div id="searchinput" style="width:160px;height:25px;" ng-show="bd.issearching" class="slide-right">
                        <div style="position:relative; height:95%;">
                            <input type="text" id="txtsearch" ng-model="searchquery.q" style="width:140px; height:100%;" class="searchinput text-input--underbar" />
                           
                                <ons-icon id="icncancelsearch" icon="fa-search" ng-click="bd.search" size="18px"
                                          style="width:20px;position:absolute;right:-20px; vertical-align:baseline;top:4px" fixed-width="false">
                                </ons-icon>
                            
                          </div>

                    </div>
                    <ons-toolbar-button id="searchicon">
                        <div style="display:inline-block;">
                            <ons-gesture-detector style="display:block;">
                                <div style="display:inline-block;">
                                    <ons-icon id="mysearchicon" ng-attr-icon="{{!bd.issearching? 'fa-search' : 'ion-close'}}"
                                              slide-toggle="#searchinput" size="24px" fixed-width="false" ng-click="bd.clicksearch()">

                                    </ons-icon>
                                </div>
                            </ons-gesture-detector>
                        </div>
</ons-toolbar-button>
</div>
        </ons-toolbar>

        <ons-sliding-menu menu-page="menu.html" side="left"
                          var="menu" type="reveal" max-slide-distance="260px" swipeable="true">
        </ons-sliding-menu>

        <ons-bottom-toolbar id="confirmationtoolbar" class="slide-right" ng-show="bd.userinfo.email_confirmation == 0 && showemailconfirmation">
            <ons-gesture-detector  ng-swipeleft="hideemailconfirmation()" ng-swiperight="hideemailconfirmation()">
                <div style="text-align: center; line-height: 15px; font-size:11px; padding:3px"> In order to fully experience bracketdash features.<br>Please confirm your email address. <button class="button btnxsmall">Resend Confirmation</button>   </div>
            </ons-gesture-detector>
        </ons-bottom-toolbar>

        <ons-template id="menu.html">
            <ons-page modifier="menu-page">
                <ons-toolbar modifier="transparent"></ons-toolbar>
                <ons-list class="menu-list">
                    <ons-list-item ng-if="bd.isloggedin" modifier="chevron" class="menu-item">
                        <!--<ons-icon icon="minus-square-o" ng-show="bd.accountexpand"></ons-icon>
                        <ons-icon icon="plus-square-o" ng-show="!bd.accountexpand"></ons-icon>-->
                        <ons-row>
                            <ons-col width="25%" >
                                <img  src="{{bd.userinfo.Avatar_link
}}" id="myprofilepic" ng-click="showdialogprofilepic()" class="avatar">
                                <canvas id="myCanvas" />
                                <input type="file" id="base645" />
                            </ons-col>
                            <ons-col  ng-click="bd.expandaccount()">
                                {{bd.userinfo.Fullname}}
                            </ons-col>

                    </ons-list-item>
                    <ons-list ng-show="bd.accountexpand && bd.isloggedin" class="menu-list submenu">
                        <ons-list-item class="menu-item" ng-click="getprofile(bd.userinfo.Username,true,1)">
                            <ons-icon icon="fa-user" size="18px"></ons-icon>
                            Bio
                        </ons-list-item>
                        <ons-list-item class="menu-item" ng-click="getprofile(bd.userinfo.Username,true,2)">
                            <ons-icon size="18px" icon="fa-group"></ons-icon>
                            Audience
                        </ons-list-item>
                        <ons-list-item class="menu-item" ng-click="bd.setMainPage('NewActivity.html', {closeMenu: true},'New Activity')">
                            <ons-icon size="18px" icon="fa-plus"></ons-icon>
                            New Activity
                        </ons-list-item>

                        <ons-list-item class="menu-item" ng-click="getprofile(bd.userinfo.Username,true,3)">
                            <ons-icon size="18px" icon="ion-android-film"></ons-icon>
                            Activities
                        </ons-list-item>

                        <ons-list-item class="menu-item"  ng-click="bd.getactivityinprogress(bd.userinfo.Username,true,'Activity In Progress')">
                            <ons-icon size="18px" icon="fa-random"></ons-icon>
                            Activities In Progress
                        </ons-list-item>

                    </ons-list>
                    <ons-list-item ng-if="bd.isloggedin" class="menu-item" ng-click="bd.getpanel('panel','Panel')">
                        <ons-icon icon="fa-balance-scale" size="18px"></ons-icon>
                        Panel
                    </ons-list-item>
                    <ons-list-item class="menu-item" ng-click="bd.getfeed('explore','Explore')">
                        <ons-icon size="18px" icon="fa-binoculars"></ons-icon>
                        Explore
                    </ons-list-item>
                    <ons-list-item ng-show="!bd.isloggedin" class="menu-item" ng-click="bd.setMainPage('Login.html', {closeMenu: true},'Login')">
                        <ons-icon icon="fa-lock" size="18px"></ons-icon>
                        Login
                    </ons-list-item>
                    <ons-list-item ng-show="!bd.isloggedin" class="menu-item" ng-click="bd.setMainPage('SignUp.html', {closeMenu: true},'Login')">
                        <ons-icon size="18px" icon="fa-sign-in"></ons-icon>
                        Sign Up (optional)
                    </ons-list-item>
                    <ons-list-item ng-if="bd.isloggedin" class="menu-item" ng-click="getnotifications()">
                        <ons-icon size="18px" icon="fa-bell-o"></ons-icon>
                        Notifications
                        <div class="notification menu-notification">{{bd.userinfo.notification_no}}</div>
                    </ons-list-item>
                    <ons-list-item ng-if="bd.isloggedin" modifier="chevron" class="menu-item" ng-click="bd.expandsettings()">
                        <ons-icon icon="minus-square-o" size="18px" ng-show="bd.settingsexpand"></ons-icon>
                        <ons-icon icon="plus-square-o" size="18px" ng-show="!bd.settingsexpand"></ons-icon>
                        Settings
                    </ons-list-item>
                    <ons-list ng-show="bd.settingsexpand && bd.isloggedin" class="menu-list  submenu" style="margin-left:10px">
                        <ons-list-item class="menu-item" ng-click="bd.getsettings(true)">
                            <ons-icon icon="fa-user" size="18px"></ons-icon>
                            Edit Profile
                        </ons-list-item>
                        <ons-list-item class="menu-item" ng-click="bd.setMainPage('AccountSettings.html', {closeMenu: true},'Account Settings')">
                            <ons-icon icon="fa-gear" size="18px"></ons-icon>
                            Account Settings
                        </ons-list-item>

                        <ons-list-item class="menu-item" ng-click="bd.setMainPage('PrivacySettings.html', {closeMenu: true},'Privacy')">
                            <ons-icon icon="fa-lock" size="18px"></ons-icon>
                            Privacy
                        </ons-list-item>

                    </ons-list>
                    <ons-list-item ng-if="bd.isloggedin" modifier="chevron" class="menu-item" ng-click="bd.expandmessages()">
                        <ons-icon icon="minus-square-o" size="18px" ng-show="bd.messagesexpand"></ons-icon>
                        <ons-icon icon="plus-square-o" size="18px" ng-show="!bd.messagesexpand"></ons-icon>
                        Messages
                    </ons-list-item>
                    <ons-list ng-show="bd.messagesexpand && bd.isloggedin" class="menu-list  submenu" style="margin-left:10px">
                        <ons-list-item class="menu-item" ng-click="getmessages()">
                            <ons-icon icon="fa-envelope-o" size="18px"></ons-icon>
                            Inbox
                            <div class="notification menu-notification">{{bd.userinfo.inbox_no}}</div>
                        </ons-list-item>
                        <ons-list-item class="menu-item" ng-click="bd.setMainPage('Compose.html', {closeMenu: true},'New Message')">
                            <ons-icon icon="fa-plus" size="18px"></ons-icon>
                           Compose
                        </ons-list-item>
                    </ons-list>
                    <ons-list-item ng-show="bd.isloggedin" class="menu-item" ng-click="bd.logout()">
                        <ons-icon icon="fa-sign-out" size="18px"></ons-icon>
                        Logout
                    </ons-list-item>
                </ons-list>


                <br>

                <ons-list class="bottom-menu-list">

                </ons-list>
                <div class="bottomgap"></div>
            </ons-page>
        </ons-template>

        <ons-template id="page1.html">
            <ons-page>
                <div class="headergap"></div>
                <div data-role="content" class="demo-content">
                    <div style="opacity:0.5; text-align:center; margin-top:50px;" ng-show="feed.length==0">
                        No Activities to show
                    </div>
                    <div ng-repeat="f in feed.obj">
                        <div class="activity-wrapper" ng-if="f.activity_type == 'battle'">
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div>
                                        <div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body">
                                <div class="contestant-section" ng-repeat="con in f.contestants_info">
                                    <div class="section-badge">
                                        <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                            <img src="{{con.avatar_link}}" alt="">
                                        </div>
                                        <div class="section-username">{{con.contestant_username}}</div>
                                    </div><div  class="section-thumbnail-and-ratings">
                                        <div ng-click="playvideo(con.video_link)" class="section-thumbnail" data-video-link="{{con.video_link}}">
                                            <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                            <img src="{{con.thumbnail_link}}" alt="">
                                        </div><div class="section-ratings">
                                            <div class="likes-ratings"><div class="like-button"  ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                                            <div class="rank">Rank #{{con.rank}}</div>
                                        </div>
                                    </div><div class="section-options-button-wrapper">

                                        <div  class="section-options-button" ng-click="expandvideo(con)"></div>
                                    </div>
                                    <div class="vs-divider" ng-show="f.contestants_info.length ==2 && $index ==0"><div>VS</div></div>
                                </div>

                            </div>
                            <div class="activity-footer ng-binding">
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"  ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'challenge'">
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link
}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div><div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body">
                                <div class="oc_challenge_wrapper">
                                    <div class="activity-divider">Challenge</div>
                                    <div class="contestant-section" ng-repeat="con in f.contestants_info" ng-if="$index == 0">
                                        <div class="section-badge">
                                            <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                                <img src="{{con.avatar_link}}" alt="">
                                            </div><div class="section-username">{{con.contestant_username}}</div>
                                        </div>
                                        <div   class="section-thumbnail-and-ratings">
                                            <div ng-click="playvideo(con.video_link)" class="section-thumbnail" data-video-link="{{con.video_link}}">
                                                <div class="play-button" data-vlink="{{con.video_link}}"></div><img src="{{con.thumbnail_link}}" alt="">
                                            </div>
                                            <div class="section-ratings">
                                                <div class="likes-ratings"><div class="like-button"  ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                                                <div class="rank">Rank #{{con.rank}}</div>
                                            </div>
                                        </div><div class="section-options-button-wrapper">
                                            <div class="section-options-button"  ng-click="bd.expandvideo(con)"></div>
                                        </div>
                                    </div>

                                </div>
                                <div class="oc_response_wrapper" ng-show="f.contestants_info.length > 1">
                                    <div class="activity-divider">Response</div>

                                    <div class="contestant-section" ng-repeat="con in f.contestants_info" ng-if="$index > 0">
                                        <div class="section-badge">
                                            <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                                <img src="{{con.avatar_link}}" alt="">
                                            </div>
                                            <div class="section-username">{{con.contestant_username}}</div>
                                        </div><div  class="section-thumbnail-and-ratings">
                                            <div ng-click="playvideo(con.video_link)"  class="section-thumbnail" data-video-link="{{con.video_link}}">
                                                <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                                <img src="{{con.thumbnail_link}}" alt="">
                                            </div><div class="section-ratings">
                                                <div class="likes-ratings"><div class="like-button"  ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                                                <div class="rank">Rank #{{con.rank}}</div>
                                            </div>
                                        </div><div class="section-options-button-wrapper">
                                            <div class="section-options-button"  ng-click="expandvideo(con)"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="activity-footer" >
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"  ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'bracket'">
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div><div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div><div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-divider">Round {{f.activity_round}}</div><div class="activity-body">
                                <div ng-repeat="all in f.contestants_info">
                                    <div class="bracket-section" ng-if="$index % 2 === 0" ng-init="group = f.contestants_info.slice($index, $index + 2)">
                                        <div class="bracket-section-content-wrapper">
                                            <div ng-repeat="con in group">
                                                <div class="bracket-section-content">
                                                    <div class="bracket-section-avatar-wrapper" ng-click="getprofile(con.contestant_username,true)">
                                                        <div class="bracket-section-avatar">
                                                            <img src="{{con.avatar_link}}">
                                                        </div>
                                                        <div class="bracket-section-username">{{con.contestant_username}}</div>
                                                    </div><div ng-click="playvideo(con.video_link)"  class="bracket-section-thumbnail">
                                                        <div class="play-button" data-vlink="{{con.avatar_link}}"></div>
                                                        <img src="{{con.thumbnail_link}}" alt="">
                                                    </div>
                                                    <div class="bracket-section-ratings" ng-click="bd.likevideo(f.activity_id,con.video_id)">
                                                        <div class="likes-ratings">
                                                            <div class="like-button"  ></div>
                                                            <div class="like-count">{{con.likes}}</div>
                                                        </div>
                                                    </div><div class="bracket-section-options-button-wrapper">
                                                        <div class="bracket-section-options-button"></div>
                                                    </div>


                                                </div>


                                            </div>
                                        </div>
                                        <div class="bracket-section-frame"></div>
                                    </div>

                                </div>

                            </div>

                            <div class="activity-footer"  ng-click="bd.expandfeed(f.activity_id);">
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"  ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'exhibition'">

                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div>
                                        <div class="activity-date">{{f.activity_date}}</div>
                                    </div><div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body" ng-repeat="con in f.contestants_info">
                                <div ng-click="playvideo(con.video_link)"  class="exhibition-thumbnail">
                                    <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                    <img src="{{con.thumbnail_link}}">
                                </div>
                                <div class="likes-ratings"><div class="like-button" ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                            </div>
                            <div class="activity-footer" >
                                <div class="activity-description">{{con.thumbnail_link}}</div>

                                <div class="activity-options-button"  ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align:center; margin-top:20px;" ng-if="feed.hasmore">
                        
                    <ons-button class="btnsmall button button--material btnsecond" ng-if="bd.CurrentPage == 'Explore'" ng-click="bd.getfeed('explore', 'Explore',feedlimit+10)">Load more</ons-button>
                        <ons-button class="btnsmall button button--material btnsecond" ng-if="bd.CurrentPage == 'Panel'" ng-click="bd.getpanel('panel', 'Panel',feedlimit+10)">Load more</ons-button>
                    </div>
                </div>

                <div class="bottomgap"></div>
            </ons-page>
        </ons-template>

        <ons-template id="Audience.html">
            <ons-page>
                <div class="headergap"></div>

                <ons-row>
                    <ons-col>
                        <div class="profilewrapper">
                            <ons-row>
                                <ons-col>
                                    <ons-list ng-if="viewuserinfo.Username != bd.userinfo.Username">
                                        <ons-list-item ng-if="!isusernameinarray(viewuserinfo.audience,bd.userinfo.Username)" ng-click="joinaudience(viewuserinfo.Username)" class="centered">
                                            <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                            Join Audience
                                        </ons-list-item>
                                        <ons-list-item ng-if="isusernameinarray(viewuserinfo.audience,bd.userinfo.Username)" ng-click="leaveaudience(viewuserinfo.Username)" class="centered">
                                            <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                            Leave Audience
                                        </ons-list-item>
                                    </ons-list>
                                    <ons-list ng-if="viewuserinfo.Username == bd.userinfo.Username && bd.userinfo.join_audience_requests.count > 0">
                                        <ons-list-item class="centered" style="font-size: small !important;" ng-click="dialogaudiencerequests.show()">
                                            <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                            You have {{bd.userinfo.join_audience_requests.count}} join audience request
                                        </ons-list-item>
                                    </ons-list>
                                    <div class="profile-card">

                                        <img src="{{viewuserinfo.Avatar_link}}" class="profile-image">
                                        <div class="profile-name">{{viewuserinfo.Fullname}}</div>
                                        <div class="profile-id">{{viewuserinfo.Username}}</div>
                                        <div class="profileStats">Stats {{bd.userinfo.stats}} win(s)</div>
                                        <div class="profile-desc">{{viewuserinfo.about}}</div>

                                    </div>

                                    <ons-list>
                                        <ons-list-item>
                                            <ons-row>
                                                <ons-col class="info-col" ng-click="getaudience(viewuserinfo.Username, true)">
                                                    <div class="info-num"></div>
                                                    <div class="info-unit">Audience</div>
                                                </ons-col>
                                                <ons-col class="info-col" ng-click="bd.getactivitylog(viewuserinfo.Username,true,'Activity Log')">
                                                    <div class="info-num"></div>
                                                    <div class="info-unit">Activities</div>
                                                </ons-col>
                                                <ons-col class="info-col" ng-click="bd.getactivityinprogress(viewuserinfo.Username,true,'Activity In Progress')">
                                                    <div class="info-num"></div>
                                                    <div class="info-unit">In progress</div>
                                                </ons-col>
                                            </ons-row>

                                        </ons-list-item>
                                    </ons-list>

                                </ons-col>
                            </ons-row>
                        </div>
                        <div style="opacity:0.5; text-align:center; margin-top:50px;" ng-show="myaudience.length==0">
                            No Audience to show
                        </div>
                        <ons-list modifier="inset" class="useractivitylist" ng-if="myaudience.length > 0">
                            <ons-list-header>Audience</ons-list-header>
                            <ons-list-item ng-click="getprofile(user.Username,true)" class="timeline-li" modifier="tappable" ng-repeat="user in myaudience">
                                <div style="float:left; width:100%; max-width:95%;">
                                    <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar" ></div>
                                    <div style="max-width:60%;float:left">
                                        {{user.Fullname}}<br />
                                        <span class="subtext"> {{user.Username}}</span>
                                    </div>
                                </div>
                            </ons-list-item>

                        </ons-list>

                    </ons-col>
                </ons-row>
           
                <div class="bottomgap"></div>
             </ons-page>
        </ons-template>

        <ons-template id="biobar.html">
            <div class="tab-bar">
                <label class="tab-bar__item">
                    <input type="radio" name="tab-bar-c" checked="checked">
                    <button class="tab-bar__button">
                        <div class="tab-bar__label">Bio</div>
                    </button>
                </label>

                <label class="tab-bar__item">
                    <input type="radio" name="tab-bar-c">
                    <button class="tab-bar__button">
                        <div class="tab-bar__label">Two</div>
                    </button>
                </label>

                <label class="tab-bar__item">
                    <input type="radio" name="tab-bar-c">
                    <button class="tab-bar__button">
                        <div class="tab-bar__label">Three</div>
                    </button>
                </label>
            </div>
      
          </ons-template>

        <ons-template id="Bio.html">
            <ons-page>
                <div class="headergap"></div>

                <ons-tabbar class="biobar">
                    <ons-tab page="BioContent.html" label="Bio" icon="fa-user" active="true"></ons-tab>
                    <ons-tab page="Audience.html" label="Audience" icon="fa-group"></ons-tab>
                    <ons-tab page="Activities.html" label="Activities" icon="ion-android-film"></ons-tab>

                    <ons-tab page="ActivityIn Progess.html" label="In Progress" icon="fa-random"></ons-tab>
                    <ons-tab label="Join Audience" icon="ion-android-person-add"></ons-tab>
                    <ons-tab label="Activity" icon="fa-plus"></ons-tab>
                </ons-tabbar>
                <div class="bottomgap"></div>
            </ons-page>
        </ons-template>

        <ons-template id="BioContent.html">
            <ons-page>
                <div class="headergap"></div>
                <div class="profilewrapper">
                    <ons-row>
                        <ons-col>
                            <ons-list ng-if="viewuserinfo && viewuserinfo.Username != bd.userinfo.Username">
                                <ons-list-item modifier="tappable" ng-if="!isusernameinarray" ng-click="joinaudience(viewuserinfo.Username)" class="centered">
                                    <ons-icon  icon="ion-android-person-add" size="28px"></ons-icon>
                                    Join Audience
                                </ons-list-item>
                                <ons-list-item modifier="tappable" ng-if="isusernameinarray" ng-click="leaveaudience(viewuserinfo.Username)" class="centered">
                                    <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                    Leave Audience
                                </ons-list-item>
                            </ons-list>
                            <ons-list ng-if="viewuserinfo.Username == bd.userinfo.Username && bd.userinfo.join_audience_requests.count > 0">
                                <ons-list-item modifier="tappable" class="centered" style="font-size:small !important;" ng-click="dialogaudiencerequests.show()">
                                    <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                    You have {{bd.userinfo.join_audience_requests.count}} join audience request
                                </ons-list-item>
                            </ons-list>
                            <div class="profile-card">
                                <img src="{{viewuserinfo.Avatar_link}}" class="profile-image">
                                <div class="profile-name">{{viewuserinfo.Fullname}}</div>
                                <div class="profile-id">{{viewuserinfo.Username}}</div>
                                <div class="profileStats">Stats {{bd.userinfo.stats}} win(s)</div>
                                <div class="profile-desc">{{viewuserinfo.about}}</div>

                            </div>
                            <div class="tab-bar tab-bar--top" ng-show="viewuserinfo.Username != bd.userinfo.Username">
                                <label class="tab-bar__item">
                                    <input type="radio" name="tab-bar-c" ng-model="viewuserinfo.mode" value="1" checked="checked">
                                    <button class="tab-bar__button">
                                        <div class="tab-bar__label">Bio</div>
                                    </button>
                                </label>

                                <label class="tab-bar__item">
                                    <input type="radio" name="tab-bar-c" ng-model="viewuserinfo.mode" value="2">
                                    <button class="tab-bar__button">
                                        <div class="tab-bar__label">Audience</div>
                                    </button>
                                </label>

                                <label class="tab-bar__item">
                                    <input type="radio" name="tab-bar-c" ng-model="viewuserinfo.mode" value="3">
                                    <button class="tab-bar__button">
                                        <div class="tab-bar__label">Activities</div>
                                    </button>
                                </label>
                            </div>

                        </ons-col>
                    </ons-row>
                </div>
                <div class="demo-content contentwrapper" ng-show="viewuserinfo.mode == 1">
                    <ons-list style="margin-top: 12px;">
                        <ons-list-item>
                            <div class="prop-desc">
                                <ons-icon icon="fa-map-marker"></ons-icon>
                                Location : {{viewuserinfo.bio.location}}
                            </div>
                        </ons-list-item>

                        <ons-list-item>
                            <div class="prop-desc">
                                <ons-icon icon="fa-mobile"></ons-icon>
                                Hobbies:{{viewuserinfo.bio.hobbies}}
                            </div>
                        </ons-list-item>

                        <ons-list-item>
                            <div class="prop-desc">
                                <ons-icon icon="fa-book"></ons-icon>
                                links:{{viewuserinfo.bio.links}}

                            </div>
                        </ons-list-item>

                    </ons-list>
                </div>

                <div class="demo-content contentwrapper" ng-show="viewuserinfo.mode==2">
                    <div style="opacity:0.5; text-align:center; margin-top:50px;" ng-show="viewuserinfo.audience.length==0">
                        No Audience to show
                    </div>
                    <ons-list modifier="inset" >
                        <ons-list-item ng-click="getprofile(user.Username,true)" class="timeline-li" modifier="tappable" ng-repeat="user in viewuserinfo.audience">
                            <div style="float:left; width:100%; max-width:95%;">
                                <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar" style="width: 35px;height: 35px;border-radius: 20px;margin-top: -6px;"></div>
                                <div style="max-width:60%;float:left">
                                    {{user.Fullname}}<br />
                                    <span class="subtext"> {{user.Username}}</span>
                                </div>
                            </div>
                        </ons-list-item>

                    </ons-list>
                </div>
                <div class="demo-content contentwrapper" ng-show="viewuserinfo.mode==3">
                    <div style="opacity:0.5; text-align:center; margin-top:50px;" ng-show="viewuserinfo.feed.length==0">
                        No Activities to show
                    </div>
                    <div ng-repeat="f in viewuserinfo.feed">
                        <div class="activity-wrapper" ng-if="f.activity_type == 'battle'">
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div>
                                        <div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body">
                                <div class="contestant-section" ng-repeat="con in f.contestants_info">
                                    <div class="section-badge">
                                        <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                            <img src="{{con.avatar_link}}" alt="">
                                        </div>
                                        <div class="section-username">{{con.contestant_username}}</div>
                                    </div><div ng-click="playvideo(con.video_link)" class="section-thumbnail-and-ratings">
                                        <div class="section-thumbnail" data-video-link="{{con.video_link}}">
                                            <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                            <img src="{{con.thumbnail_link}}" alt="">
                                        </div><div class="section-ratings">
                                    </div><div ng-click="playvideo(_link)" class="section-thumbnail-and-ratings">
                                            <div class="likes-ratings"><div class="like-button" ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                                            <div class="rank">Rank #{{con.rank}}</div>
                                        </div>
                                    </div><div class="section-options-button-wrapper">
                                        <div class="section-options-button" ng-click="expandvideo(con)"></div>
                                    </div>
                                    <div class="vs-divider" ng-show="f.contestants_info.length ==2 && $index ==0"><div>VS</div></div>
                                </div>

                            </div>
                            <div class="activity-footer ng-binding">
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"   ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'challenge'">
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link
}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div><div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body">
                                <div class="oc_challenge_wrapper">
                                    <div class="activity-divider">Challenge</div>
                                    <div class="contestant-section" ng-repeat="con in f.contestants_info" ng-if="$index == 0">
                                        <div class="section-badge">
                                            <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                                <img src="{{con.avatar_link}}" alt="">
                                            </div><div class="section-username">{{con.contestant_username}}</div>
                                        </div>
                                        <div ng-click="playvideo(con.video_link)" class="section-thumbnail-and-ratings">
                                            <div class="section-thumbnail" data-video-link="{{con.video_link}}">
                                                <div class="play-button" data-vlink="{{con.video_link}}"></div><img src="{{con.thumbnail_link}}" alt="">
                                            </div>
                                            <div class="section-ratings">
                                                <div class="likes-ratings"><div class="like-button"></div><div class="like-count">{{con.likes}}</div></div>
                                                <div class="rank">Rank #{{con.rank}}</div>
                                            </div>
                                        </div><div class="section-options-button-wrapper">
                                            <div class="section-options-button" ng-click="expandvideo(con)"></div>
                                        </div>
                                    </div>

                                </div>
                                <div class="oc_response_wrapper" ng-show="f.contestants_info.length > 1">
                                    <div class="activity-divider">Response</div>

                                    <div class="contestant-section" ng-repeat="con in f.contestants_info" ng-if="$index > 0">
                                        <div class="section-badge">
                                            <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                                <img src="{{con.avatar_link}}" alt="">
                                            </div>
                                            <div class="section-username">{{con.contestant_username}}</div>
                                        </div><div ng-click="playvideo(con.video_link)" class="section-thumbnail-and-ratings">
                                            <div class="section-thumbnail" data-video-link="{{con.video_link}}">
                                                <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                                <img src="{{con.thumbnail_link}}" alt="">
                                            </div><div class="section-ratings">
                                                <div class="likes-ratings"><div class="like-button"></div><div class="like-count">{{con.likes}}</div></div>
                                                <div class="rank">Rank #{{con.rank}}</div>
                                            </div>
                                        </div><div class="section-options-button-wrapper">
                                            <div class="section-options-button" ng-click="expandvideo(con)"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="activity-footer">
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"   ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'bracket'" >
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div><div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div><div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-divider">Round {{f.activity_round}}</div><div class="activity-body">
                                <div ng-repeat="all in f.contestants_info">
                                    <div class="bracket-section" ng-if="$index % 2 === 0" ng-init="group = f.contestants_info.slice($index, $index + 2)">
                                        <div class="bracket-section-content-wrapper">
                                            <div ng-repeat="con in group">
                                                <div class="bracket-section-content">
                                                    <div class="bracket-section-avatar-wrapper" ng-click="getprofile(con.contestant_username,true)">
                                                        <div class="bracket-section-avatar">
                                                            <img src="{{con.avatar_link}}">
                                                        </div>
                                                        <div class="bracket-section-username">{{con.contestant_username}}</div>
                                                    </div><div ng-click="playvideo(con.video_link)" class="bracket-section-thumbnail">
                                                        <div class="play-button" data-vlink="{{con.avatar_link}}"></div>
                                                        <img src="{{con.thumbnail_link}}" alt="">
                                                    </div>
                                                    <div class="bracket-section-ratings" ng-click="bd.likevideo(f.activity_id,con.video_id)">
                                                        <div class="likes-ratings">
                                                            <div class="like-button"></div>
                                                            <div class="like-count">{{con.likes}}</div>
                                                        </div>
                                                    </div><div class="bracket-section-options-button-wrapper">
                                                        <div class="bracket-section-options-button"></div>
                                                    </div>


                                                </div>


                                            </div>
                                        </div>
                                        <div class="bracket-section-frame"></div>
                                    </div>

                                </div>

                            </div>

                            <div class="activity-footer" >
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"   ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'exhibition'">

                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div>
                                        <div class="activity-date">{{f.activity_date}}</div>
                                    </div><div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body" ng-repeat="con in f.contestants_info">
                                


                                <div ng-click="playvideo(con.video_link)" class="exhibition-thumbnail">
                                    <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                    <img src="{{con.thumbnail_link}}">
                                </div>
                                <div class="likes-ratings"><div class="like-button"></div><div class="like-count">{{con.likes}}</div></div>
                            </div><div class="activity-footer" >
                                <div class="activity-description">{{con.thumbnail_link}}</div>
                                <div class="activity-options-button" ></div>
                            </div>
                        </div>
                    </div>
                    <div style="text-align:center; margin-top:20px;" ng-if="viewuserinfo.feed.hasmore">
                        <ons-button class="btnsmall button button--material btnsecond" ng-click="bd.getactivityinprogress(feedlimit+10)">Load more</ons-button>
                    </div>


                </div>
                <div class="demo-content contentwrapper" ng-show="viewuserinfo.mode==4">
                    <div style="opacity:0.5; text-align:center; margin-top:50px;" ng-show="viewuserinfo.feedinprogress.length==0">
                        No Activities to show
                    </div>
                    <div ng-repeat="f in viewuserinfo.feedinprogress">
                        <div class="activity-wrapper" ng-if="f.activity_type == 'battle'">
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div>
                                        <div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body">
                                <div class="contestant-section" ng-repeat="con in f.contestants_info">
                                    <div class="section-badge">
                                        <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                            <img src="{{con.avatar_link}}" alt="">
                                        </div>
                                        <div class="section-username">{{con.contestant_username}}</div>
                                    </div><div ng-click="playvideo(con.video_link)" class="section-thumbnail-and-ratings">
                                        <div class="section-thumbnail" data-video-link="{{con.video_link}}">
                                            <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                            <img src="{{con.thumbnail_link}}" alt="">
                                        </div><div class="section-ratings">
                                            <div class="likes-ratings"><div class="like-button"></div><div class="like-count">{{con.likes}}</div></div>
                                            <div class="rank">Rank #{{con.rank}}</div>
                                        </div>
                                    </div><div class="section-options-button-wrapper">
                                        <div class="section-options-button" ng-click="expandvideo(con)"></div>
                                    </div>
                                    <div class="vs-divider" ng-show="f.contestants_info.length ==2 && $index ==0"><div>VS</div></div>
                                </div>

                            </div>
                            <div class="activity-footer ng-binding" >
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"  ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'challenge'">
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link
}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div><div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body">
                                <div class="oc_challenge_wrapper">
                                    <div class="activity-divider">Challenge</div>
                                    <div class="contestant-section" ng-repeat="con in f.contestants_info" ng-if="$index == 0">
                                        <div class="section-badge">
                                            <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                                <img src="{{con.avatar_link}}" alt="">
                                            </div><div class="section-username">{{con.contestant_username}}</div>
                                        </div>
                                        <div ng-click="playvideo(con.video_link)" class="section-thumbnail-and-ratings">
                                            <div class="section-thumbnail" data-video-link="{{con.video_link}}">
                                                <div class="play-button" data-vlink="{{con.video_link}}"></div><img src="{{con.thumbnail_link}}" alt="">
                                            </div>
                                            <div class="section-ratings">
                                                <div class="likes-ratings"><div class="like-button"></div><div class="like-count">{{con.likes}}</div></div>
                                                <div class="rank">Rank #{{con.rank}}</div>
                                            </div>
                                        </div><div class="section-options-button-wrapper">
                                            <div class="section-options-button" ng-click="expandvideo(con)"></div>
                                        </div>
                                    </div>

                                </div>
                                <div class="oc_response_wrapper" ng-show="f.contestants_info.length > 1">
                                    <div class="activity-divider">Response</div>

                                    <div class="contestant-section" ng-repeat="con in f.contestants_info" ng-if="$index > 0">
                                        <div class="section-badge">
                                            <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                                <img src="{{con.avatar_link}}" alt="">
                                            </div>
                                            <div class="section-username">{{con.contestant_username}}</div>
                                        </div><div ng-click="playvideo(con.video_link)" class="section-thumbnail-and-ratings">
                                            <div class="section-thumbnail" data-video-link="{{con.video_link}}">
                                                <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                                <img src="{{con.thumbnail_link}}" alt="">
                                            </div><div class="section-ratings">
                                                <div class="likes-ratings"><div class="like-button"></div><div class="like-count">{{con.likes}}</div></div>
                                                <div class="rank">Rank #{{con.rank}}</div>
                                            </div>
                                        </div><div class="section-options-button-wrapper">
                                            <div class="section-options-button" ng-click="expandvideo(con)"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="activity-footer" >
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"  ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'bracket'">
                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div><div class="activity-date">{{f.activity_date}}</div>
                                    </div>
                                    <div class="activity-title">{{f.activity_title}}</div><div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-divider">Round {{f.activity_round}}</div><div class="activity-body">
                                <div ng-repeat="all in f.contestants_info">
                                    <div class="bracket-section" ng-if="$index % 2 === 0" ng-init="group = f.contestants_info.slice($index, $index + 2)">
                                        <div class="bracket-section-content-wrapper">
                                            <div ng-repeat="con in group">
                                                <div class="bracket-section-content">
                                                    <div class="bracket-section-avatar-wrapper" ng-click="getprofile(con.contestant_username,true)">
                                                        <div class="bracket-section-avatar">
                                                            <img src="{{con.avatar_link}}">
                                                        </div>
                                                        <div class="bracket-section-username">{{con.contestant_username}}</div>
                                                    </div><div ng-click="playvideo(con.video_link)" class="bracket-section-thumbnail">
                                                        <div class="play-button" data-vlink="{{con.avatar_link}}"></div>
                                                        <img src="{{con.thumbnail_link}}" alt="">
                                                    </div>
                                                    <div class="bracket-section-ratings" ng-click="bd.likevideo(f.activity_id,con.video_id)">
                                                        <div class="likes-ratings">
                                                            <div class="like-button"></div>
                                                            <div class="like-count">{{con.likes}}</div>
                                                        </div>
                                                    </div><div class="bracket-section-options-button-wrapper">
                                                        <div class="bracket-section-options-button"></div>
                                                    </div>


                                                </div>


                                            </div>
                                        </div>
                                        <div class="bracket-section-frame"></div>
                                    </div>

                                </div>

                            </div>

                            <div class="activity-footer" >
                                <div class="activity-description">{{f.activity_description}}</div>
                                <div class="activity-options-button"  ng-click="bd.expandfeed(f.activity_id);"></div>
                            </div>
                        </div>
                        <div class="activity-wrapper" ng-if="f.activity_type == 'exhibition'">

                            <div class="activity-header">
                                <div class="activity-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                                    <img src="{{f.activity_host_info.avatar_link}}" alt="">
                                </div>
                                <div class="activity-header-txt">
                                    <div class="activity-header-txt-top-section">
                                        <div class="host-username">{{f.activity_host_info.username}}</div>
                                        <div class="activity-date">{{f.activity_date}}</div>
                                    </div><div class="activity-title">{{f.activity_title}}</div>
                                    <div class="activity-type"> ({{f.activity_category}} / {{f.activity_type}})</div>
                                </div>
                            </div>
                            <div class="activity-body" ng-repeat="con in f.contestants_info">
                                <div ng-click="playvideo(con.video_link)" class="exhibition-thumbnail">
                                    <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                    <img src="{{con.thumbnail_link}}">
                                </div>
                                <div class="likes-ratings"><div class="like-button"  ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                            </div><div class="activity-footer">
                                <div class="activity-description">{{con.thumbnail_link}}</div>
                                <div class="activity-options-button"></div>
                            </div>
                        </div>
                    </div>
                    <div style="text-align:center; margin-top:20px;" ng-if="viewuserinfo.feed.status  && viewuserinfo.feed.status != 'complete'">
                    <ons-button class="btnsmall button button--material btnsecond" ng-click="bd.getfeed(feedlimit+10)">Load more</ons-button>
                    </div>

                </div>
                <div class="bottomgap"></div>
             </ons-page>
        </ons-template>

        <ons-template id="Profile.html">
            <ons-page>
                <div class="headergap"></div>
                <ons-row>
                    <ons-col>

                        <div class="profilewrapper">
                            <ons-row>
                                <ons-col>
                                    <ons-list ng-if="viewuserinfo.Username != bd.userinfo.Username">
                                        <ons-list-item ng-if="!isusernameinarray(viewuserinfo.audience,bd.userinfo.Username)" ng-click="joinaudience(viewuserinfo.Username)" class="centered">
                                            <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                            Join Audience
                                        </ons-list-item>
                                        <ons-list-item ng-if="isusernameinarray(viewuserinfo.audience,bd.userinfo.Username)" ng-click="leaveaudience(viewuserinfo.Username)" class="centered">
                                            <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                            Leave Audience
                                        </ons-list-item>
                                    </ons-list>
                                    <ons-list ng-if="viewuserinfo.Username == bd.userinfo.Username && bd.userinfo.join_audience_requests.count > 0">
                                        <ons-list-item class="centered" style="font-size:small;" ng-click="dialogaudiencerequests.show()">
                                            <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                            You have {{bd.userinfo.join_audience_requests.count}} join audience request
                                        </ons-list-item>
                                    </ons-list>
                                    <div class="profile-card">

                                        <img src="{{viewuserinfo.Avatar_link}}" class="profile-image">
                                        <div class="profile-name">{{viewuserinfo.Fullname}}</div>
                                        <div class="profile-id">{{viewuserinfo.Username}}</div>
                                        <div class="profileStats">Stats {{bd.userinfo.stats}} win(s)</div>
                                        <div class="profile-desc">{{viewuserinfo.about}}</div>

                                    </div>

                                    <ons-list>
                                        <ons-list-item>
                                            <ons-row>
                                                <ons-col class="info-col" ng-click="getaudience(viewuserinfo.Username)">
                                                    <div class="info-num"></div>
                                                    <div class="info-unit">Audience</div>
                                                </ons-col>
                                                <ons-col class="info-col" ng-click="bd.getactivitylog(viewuserinfo.Username,'Activity Log')">
                                                    <div class="info-num"></div>
                                                    <div class="info-unit">Activities</div>
                                                </ons-col>
                                                <ons-col class="info-col" ng-click="bd.getactivityinprogress(viewuserinfo.Username,'Activity In Progress')">
                                                    <div class="info-num"></div>
                                                    <div class="info-unit">In progress</div>
                                                </ons-col>
                                            </ons-row>

                                        </ons-list-item>
                                    </ons-list>

                                </ons-col>
                            </ons-row>
                        </div>
                    </ons-col>
                </ons-row>

                <div class="bottomgap"></div>

            </ons-page>
        </ons-template>

        <ons-template id="ProfileSettings.html">
            <ons-page>
                <div class="headergap"></div>
                <div class="contentwrapper">
                    <ons-row><ons-col>
                                 <div style="text-align: center; padding: 10px 0;">
                                             <img src="{{bd.userinfo.Avatar_link}}" id="myprofilepic" ng-click="showdialogprofilepic()" class="avatar">
                                     </div>
</ons-col></ons-row>
                    <ons-row>
                        <ons-col>
                            <div style="text-align: center; padding: 10px 0;">
                                <input type="text" class="text-input--underbar" required style="width:95%"
                                       placeholder="Fullname" ng-model="bd.userinfo.profilesettings.fullname" value="">
                            </div>
                            <div style="text-align: center; padding: 10px 0;">
                                <input type="text" class="text-input--underbar" required style="width:95%"
                                       placeholder="City" ng-model="bd.userinfo.profilesettings.city" value="">
                            </div>
                            <div style="text-align: center; padding: 10px 0;">
                                <input type="text" class="text-input--underbar" required style="width:95%"
                                       placeholder="State" ng-model="bd.userinfo.profilesettings.state" value="">
                            </div>
                            <div style="text-align: center; padding: 10px 0;">
                                <input type="text" class="text-input--underbar" required style="width:95%"
                                       placeholder="Country" ng-model="bd.userinfo.profilesettings.country" value="">
                            </div>


                            <div style="text-align: center; padding: 10px 0;">

                                <textarea class="text-input" required style="width:95%;height:70px;"
                                          placeholder="Hobbies" ng-model="bd.userinfo.profilesettings.hobbies" value=""></textarea>
                            </div>
                            <div style="text-align: center; padding: 10px 0;">

                                <textarea class="text-input" required style="width:95%;height:70px;"
                                          placeholder="About" ng-model="bd.userinfo.profilesettings.about" value=""></textarea>
                            </div>

                            <div style="text-align: center; padding: 10px 0;" >
                                
                                <ons-list modifier="inset" class="useractivitylist"style="background-color: #e9ebef !important; color:#293c6b;">
                                    <ons-list-header style="background-color: #e9ebef !important; color:#293c6b !important;">Links <ons-icon icon="fa fa-plus" style="float:right;"  ng-click="dialogaddlink.show($event)" ></ons-icon></ons-list-header>
                                    <ons-list-item  class="timeline-li"
                                             style="min-height: 30px;"      modifier="tappable" ng-repeat="link in bd.userinfo.profilesettings.links">
                                        <div style="float:left; width:100%; max-width:95%;">
                                            <div style="width:90%;float:left"> {{link}}  <ons-icon icon="fa fa-minus-circle" style="float:right;" ng-click="removelink(link)"></ons-icon></div>
                                        </div>
                                    </ons-list-item>

                                </ons-list>
                            </div>
                            <div style="text-align: center; padding: 10px 0;">
                                <ons-botton class="button button--material btnsecond btnwide" modified="small" ng-click="bd.saveprofile()">
                                    Save Profile
                                </ons-botton>
                            </div>

                        </ons-col>
                    </ons-row>
                </div>
                <div class="bottomgap"></div>
                 </ons-page>
        </ons-template>

        <ons-template id="AccountSettings.html">

            <ons-page>

                <div class="headergap"></div>
                <div class="contentwrapper demo-content">
                    <div class="account-settings-wrapper">
                        <div class="header">
                            Edit Email
                        </div>
                        <form novalidate="novalidate" class="edit-email-form">
                            <input type="email" class="text-input--underbar" ng-model="changesettings.registeremail" placeholder="Email">
                            <ons-icon icon="ion-load-c" class="checkmail " ng-if="checkingemail" spin="true"></ons-icon>
                            <br><br>
                            {{changesettings.registeremailvalid}}
                            <ons-button modifier="large" ng-disabled="changesettings.registeremail == bd.userinfo.Email || changesettings.registeremailvalid.length > 0" class="login-button btnsecond"
                                        ng-click="changeemail()">Change Email</ons-button>
                           
                        </form>
                    </div>

                    <div class="account-settings-wrapper">
                        <div class="header">
                            Edit Username
                        </div>
                        <form novalidate="novalidate" class="edit-email-form">
                            <input type="text" class="text-input--underbar" ng-model="changesettings.registerusername" placeholder="Email">
                            <ons-icon icon="ion-load-c" class="checkmail" ng-if="checkingusername" spin="true"></ons-icon>
                            <br><br>{{changesettings.registerusernamevalid}}
                            <ons-button modifier="large" class="login-button btnsecond" ng-disabled="changesettings.registerusername == bd.userinfo.Username || changesettings.registerusernamevalid.length > 0" ng-click="changeusername()">Change Username</ons-button>
                            
                        </form>
                    </div>

                    <div class="account-settings-wrapper">
                        <div class="header">
                            Edit Password
                        </div>
                        <form novalidate="novalidate" class="edit-email-form">
                            <ons-row>
                                <ons-col>
                                    <div style="text-align: center; padding: 10px 0;">
                                        <input type="text" class="text-input--underbar" required style="width:95%"
                                               placeholder="Current Password" ng-model="changesettings.registeroldpassword" value="">
                                    </div>
                                    <div style="text-align: center; padding: 10px 0;">
                                        <input type="text" class="text-input--underbar" required style="width:95%"
                                               placeholder="New Password" ng-model="changesettings.registerpassword" value="">
                                    </div>
                                    <div style="text-align: center; padding: 10px 0;">
                                        <input type="text" class="text-input--underbar" required style="width:95%"
                                               placeholder="Confirm Password" ng-model="changesettings.registerpasswordconfirm" value="">
                                    </div>
                                    {{changesettings.registerpasswordvalid}}
                                    <div style="text-align: center; padding: 10px 0;">
                                        <ons-botton class="button button--material btnsecond btnwide" modified="small" ng-click="changepassword()">
                                            Change Password
                                        </ons-botton>
                                    </div>

                                </ons-col>
                            </ons-row>
                        </form>
                    </div>
                    

                </div>
                <br /><Br />
                <div class="contentwrapper">
              
                </div>
                <div class="bottomgap"></div>
            </ons-page>
        </ons-template>

        <ons-template id="PrivacySettings.html">
            <ons-page>
                <div class="headergap"></div>
                <div class="contentwrapper">
                    <div class="account-settings-wrapper">
                        <div class="header">
                            Who can view my profile information?
                        </div>
                        <form novalidate="novalidate" class="edit-email-form">
                            <ons-row>
                                <ons-col>
                                    <ons-list>
                                        <ons-list-item modifier="tappable">
                                            <label class="radio-button radio-button--list-item">
                                                <input type="radio" name="v" checked="{{privacysettings.profile_visibility == 'public'}}" value="public" ng-model="privacysettings.profile_visibility">
                                                <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                                                Public
                                            </label>
                                        </ons-list-item>

                                        <ons-list-item modifier="tappable">
                                            <label class="radio-button radio-button--list-item">
                                                <input type="radio" name="v" checked="{{privacysettings.profile_visibility == 'private'}}" value="private" ng-model="privacysettings.profile_visibility">
                                                <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                                                Audience members
                                            </label>
                                        </ons-list-item>
                                    </ons-list>

                                </ons-col>
                            </ons-row>
                        </form>
                    </div>


                    <div class="account-settings-wrapper">
                        <div class="header">
                            Who can message me on bracketdash?
                        </div>
                        <form novalidate="novalidate" class="edit-email-form">
                            <ons-row>
                                <ons-col>
                                    <ons-list>
                                        <ons-list-item modifier="tappable">
                                            <label class="radio-button radio-button--list-item">
                                                <input type="radio" name="m" checked="{{privacysettings.messages_settings == 'public'}}" value="public" ng-model="privacysettings.messages_settings">
                                                <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                                                Anyone
                                            </label>
                                        </ons-list-item>

                                        <ons-list-item modifier="tappable">
                                            <label class="radio-button radio-button--list-item">
                                                <input type="radio" name="m" checked="{{privacysettings.messages_settings == 'private'}}" value="private" ng-model="privacysettings.messages_settings">
                                                <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                                                Audience members
                                            </label>
                                        </ons-list-item>
                                    </ons-list>

                                </ons-col>
                            </ons-row>
                        </form>
                    </div>

                    <div class="account-settings-wrapper">
                        <div class="header">
                            Who can join my audience?
                      </div>
                        <form novalidate="novalidate" class="edit-email-form">
                            <ons-row>
                                <ons-col>
                                <ons-list>
                                            <ons-list-item modifier="tappable">
                                                <label class="radio-button radio-button--list-item">
                                                    <input type="radio" name="a" checked="{{privacysettings.join_audience_settings == 'anyone' }}" value="anyone" ng-model="privacysettings.join_audience_settings">
                                                    <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                                                    Anyone
                                                </label>
                                            </ons-list-item>

                                            <ons-list-item modifier="tappable">
                                                <label class="radio-button radio-button--list-item">
                                                    <input type="radio" name="a" checked="{{privacysettings.join_audience_settings == 'approved' }}" value="approved" ng-model="privacysettings.join_audience_settings">
                                                    <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                                                    Only if approved
                                                </label>
                                            </ons-list-item>
                                        </ons-list>
                           </form>
                          </div>

                            <ons-row>
                                <ons-col>
                                    <div style="text-align: center; padding: 10px 0;">
                                        <ons-botton class="button button--material btnsecond btnwide" modified="small" ng-click="changeprivacy()">
                                            Save Settings
                                        </ons-botton>
                                    </div>
                                </ons-col>
                            </ons-row>
                    </div>
                <div class="bottomgap"></div>
</ons-page>
        </ons-template>

        <ons-template id="Login.html">
            <ons-page>
                <div class="headergap"></div>
                <ons-row>
                    <ons-col>
                        <div class="login-form">
                            <div class="error" ng-if="loginvalidation.status==false">{{loginvalidation.reason}}</div>
                            <input type="email" class="text-input--underbar"  ng-model="loginobj.loginemail" placeholder="Email">
                            <input type="password" class="text-input--underbar"  ng-model="loginobj.loginpassword" placeholder="Password">
                            <br><br>
                            <ons-button modifier="large"  ng-disabled ="loginvalidation.emailstatus < 1 || loginvalidation.passwordstatus < 1" class="login-button" ng-click="login()">Log In</ons-button>
                            <br><br>
                            <ons-button modifier="quiet" ng-click="bd.setMainPage('ForgotPassword.html', {closeMenu: true},'Forgot Password')" class="forgot-password">Forgot password?</ons-button>
                        </div>
                    </ons-col>
                </ons-row>
                <div class="bottomgap"></div>
              </ons-page>
        </ons-template>

        <ons-template id="SignUp.html">
            <ons-page>
                <div class="headergap"></div>
                <ons-row>
                    <ons-col>
                        <div class="login-form">
                            <div class="error" ng-if="registervalidation.emailstatus<0 || registervalidation.usernamestatus <0 || registervalidation.passwordstatus <0 || registervalidation.passwordconfirmstatus <0 ">{{registervalidation.reason}}</div>
                            <input type="text" class="text-input--underbar txtsignup" ng-model="newuser.registerfullname" placeholder="Full Name">
                            <input type="text" class="text-input--underbar txtsignup"  ng-model="newuser.registerusername" placeholder="Username">
                             <ons-icon icon="ion-load-c" class="checkmail"  ng-if="checkingusername"  spin="true"></ons-icon>
                            <input type="email" class="text-input--underbar"  ng-model="newuser.registeremail" placeholder="Email">
                            <ons-icon icon="ion-load-c" class="checkmail"  ng-if="checkingemail"  spin="true"></ons-icon>
                            <input type="password" class="text-input--underbar" ng-blur="validatepassword()"  ng-model="newuser.registerpassword" placeholder="Select Password">
                            <input type="password" class="text-input--underbar" ng-blur="validatepasswordconfirm()"  ng-model="newuser.registerpasswordconfirm" placeholder="Confirm Password">
                            <br><br>
                            <ons-button modifier="large" class="login-button" ng-disabled ="registervalidation.emailstatus<1 || registervalidation.usernamestatus <1 || registervalidation.passwordstatus <1 || registervalidation.passwordconfirmstatus <1" ng-click="register()">Sign Up</ons-button>
                            <br><br>
                        </div>
                    </ons-col>
                </ons-row>
                <div class="bottomgap"></div>
               </ons-page>
        </ons-template>

        <ons-template id="Notifications.html">
            <ons-page>
                <div class="headergap"></div>
                <ons-scroller style="height: 80%; width: 100%">

                    <ons-list modifier="inset" class="useractivitylist">
                        <ons-list-header>Invitations</ons-list-header>
                        <ons-list-item ng-click="bd.getsingleactivity(n.activity_id,'Invitation')" class="timeline-li"
                                       modifier="tappable" ng-repeat="n in notifications.obj"  ng-if="n.type=='invitation'">
                            <div style="float:left; width:100%; max-width:95%;">
                                <div style="width:40%;float:left">  <img src="{{n.origin_avatar}}" class="avatar"></div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='invitation'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span> 
                                     would like you to take part in activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>
                                    
                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='upload'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Uploaded a new video to activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='accept'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Accepted invitation to activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='decline'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Declined invitation to activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='quit'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Declined quited activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='edit'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Declined edited activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>
                                </div>
                            </div>
                        </ons-list-item>

                        <ons-list-item ng-click="bd.getsingleactivity(n.activity_id,'')" class="timeline-li"
                                       modifier="tappable" ng-repeat="n in notifications.obj" ng-if="n.type!='invitation'">
                            <div style="float:left; width:100%; max-width:95%;">
                                <div style="width:40%;float:left">  <img src="{{n.origin_avatar}}" class="avatar"></div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='invitation'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    would like you to take part in activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='upload'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Uploaded a new video to activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='accept'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Accepted invitation to activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='decline'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Declined invitation to activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='quit'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Declined quited activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>

                                </div>
                                <div style="max-width:60%;float:left" ng-if="n.type=='edit'">
                                    {{n.origin_fullname}} <span class="subtext"> ({{n.origin_username}})</span>
                                    Declined edited activity: <b>{{n.title}}</b><br /><span class="subtext"> {{n.date}}</span>
                                </div>
                            </div>
                        </ons-list-item>
                    </ons-list>
                </ons-scroller>
                            <div style="text-align:center; margin-top:20px;" ng-if="notifications.status  && notifications.status != 'complete'">
                                <ons-button class="btnsmall button button--material btnsecond" ng-click="getnotifications(notificationlimit+10)">Load more</ons-button>
                            </div>
                <div class="bottomgap"></div>
         </ons-page>
        </ons-template>

        <ons-template id="Messages.html">
        <ons-page>
            <div class="headergap"></div>
            <ons-row>
                <ons-col>
                    <ons-list modifier="inset" class="useractivitylist">
                        <ons-list-header>Messages</ons-list-header>
                        <ons-list-item   class="timeline-li" ng-click="getconversation(m.conversation_id)"
                                       modifier="tappable" ng-repeat="m in messages.obj">
                            <div style="float:left; width:100%; max-width:95%;">
                                <div style="width:40%;float:left">  <img src="{{m.avatar}}" class="avatar"></div>
                                <div style="max-width:60%;float:left">
                                    {{m.fullname}} {{m.text}}<br />
                                    <span class="subtext"> {{m.username}}</span>
                                </div>
                            </div>
                        </ons-list-item>
                        <div style="text-align:center; margin-top:20px;" ng-if="messages.status  && messages.status != 'complete'">
                            <ons-button class="btnsmall button button--material btnsecond" ng-click="getmessages(messageslimit+10)">Load more</ons-button>
                        </div>
                    </ons-list>

                </ons-col>
            </ons-row>
            <div class="bottomgap"></div>
          </ons-page>
    </ons-template>

        <ons-template id="Conversation.html">
        <ons-page>
            <div class="headergap"></div>
            <ons-row>
                <ons-col>
                    <ons-list modifier="inset" class="useractivitylist">
                        <ons-list-header>Conversation with {{CurrentConversation.with.fullname}} <ons-icon icon="fa-arrow-left" class="pull-left" ng-click="getmessages()"></ons-icon></ons-list-header>
                        <ons-list-item class="timeline-li"
                                       modifier="tappable" ng-repeat="m in CurrentConversation.obj">
                            
                                <div class="comment-avatar" style="float:left">
                                    <img class="avatar" src="{{m.avatar}}">
                                </div>

                                <div style="float:left">
                                    <div class="commentoor">
                                        <span style="font-size: 10px;">{{m.username}}</span>
                                        <span style="font-size: 10px;" class="comment-date subtext">{{m.date}}</span>
                                    </div>
                                </div>
                                <div style="position:relative;">

                                    <div class="comment-text-wrapper" style="padding-top:15px;">
                                        <div class="comment-text">{{m.text}}</div>
                                    </div>
                                   
                                </div>


                            
                        </ons-list-item>


                    </ons-list>


                </ons-col>
            </ons-row>

            <div class="comment-input-wrapper">
                <ons-row>
                    <ons-col class="smallcolumn">
                        <div class="comment-input-avatar comment-avatar">
                            <img class="avatar" src="{{bd.userinfo.Avatar_link}}">
                        </div>
                    </ons-col>
                    <ons-col style="max-width:70%;">
                        <textarea data-id="5" ng-model="newmessage.text" class="comment-input" placeholder="reply..."></textarea>
                    </ons-col>
                </ons-row>
                <div>

                </div>
                <div style="width:60%;" class="comment-text-input">

                </div>
                <div style="margin-left:60px;"><button class="btnsmall button button--material btnsecond" ng-click="sendreply()">reply</button></div>
            </div>
        
            <div class="bottomgap"></div>
        </ons-page>
    </ons-template>

        <ons-template id="SingleActivity.html">
            <ons-page>
                <div class="headergap"></div>

                <div class="demo-content contentwrapper" >
                    <div class="activity-wrapper" ng-if="showsingleactivity.activity_type == 'battle'">
                        <div class="activity-header">
                            <div class="activity-host-avatar" ng-click="getprofile(showsingleactivity.activity_host_info.username,true)">
                                <img src="{{showsingleactivity.activity_host_info.avatar_link}}" alt="">
                            </div>
                            <div class="activity-header-txt">
                                <div class="activity-header-txt-top-section">
                                    <div class="host-username">{{showsingleactivity.activity_host_info.username}}</div>
                                    <div class="activity-date">{{showsingleactivity.activity_date}}</div>
                                </div>
                                <div class="activity-title">{{showsingleactivity.activity_title}}</div>
                                <div class="activity-type"> ({{showsingleactivity.activity_category}} / {{showsingleactivity.activity_type}})</div>
                            </div>
                        </div>
                        <div class="activity-body">
                            <div class="contestant-section" ng-repeat="con in showsingleactivity.contestants_info">
                                <div class="section-badge">
                                    <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                        <img src="{{con.avatar_link}}" alt="">
                                    </div>
                                    <div class="section-username">{{con.contestant_username}}</div>
                                    <div class="section-username" ng-show="showsingleactivity.isinvitation">{{con.contestant_fullname}}</div>
                                </div>
                                <div ng-show="!showsingleactivity.isinvitation" ng-click="playvideo(con.video_link)" 
                                     class="section-thumbnail-and-ratings">
                                    <div  ng-click="playvideo(con.video_link)" ng-if="!showsingleactivity.isinvitation" class="section-thumbnail" data-video-link="{{con.video_link}}">
                                        <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                        <img src="{{con.thumbnail_link}}" alt="">
                                    </div><div ng-if="!showsingleactivity.isinvitation" class="section-ratings">
                                        <div class="likes-ratings"><div class="like-button"  ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                                        <div class="rank">Rank #{{con.rank}}</div>
                                    </div>
                                </div><div ng-show="!showsingleactivity.isinvitation" class="section-options-button-wrapper">
                                    <div class="section-options-button"  ng-click="expandvideo(con)"></div>
                                </div>
                                <div class="vs-divider" ng-if="showsingleactivity.contestants_info.length ==2 && $index ==0"><div>VS</div></div>
                            </div>

                        </div>
                        <div class="activity-footer ng-binding"  >
                            <div class="activity-description">{{showsingleactivity.activity_description}}</div>
                            <div class="activity-options-button" ng-if="!showsingleactivity.isinvitation"  ng-click="bd.expandfeed(showsingleactivity.activity_id);"></div>
                        </div>
                    </div>
                    <div class="activity-wrapper" ng-if="showsingleactivity.activity_type == 'challenge'">
                        <div class="activity-header">
                            <div class="activity-host-avatar" ng-click="getprofile(showsingleactivity.activity_host_info.username,true)">
                                <img src="{{showsingleactivity.activity_host_info.avatar_link
}}" alt="">
                            </div>
                            <div class="activity-header-txt">
                                <div class="activity-header-txt-top-section">
                                    <div class="host-username">{{showsingleactivity.activity_host_info.username}}</div><div class="activity-date">{{showsingleactivity.activity_date}}</div>
                                </div>
                                <div class="activity-title">{{showsingleactivity.activity_title}}</div>
                                <div class="activity-type"> ({{showsingleactivity.activity_category}} / {{showsingleactivity.activity_type}})</div>
                            </div>
                        </div>
                        <div class="activity-body">
                            <div class="oc_challenge_wrapper">
                                <div class="activity-divider">Challenge</div>
                                <div class="contestant-section" ng-repeat="con in showsingleactivity.contestants_info" ng-if="$index == 0">
                                    <div class="section-badge">
                                        <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                            <img src="{{con.avatar_link}}" alt="">
                                        </div><div class="section-username">{{con.contestant_username}}</div>
                                    </div>
                                    <div class="section-thumbnail-and-ratings">
                                        <div ng-click="playvideo(con.video_link)" ng-if="!showsingleactivity.isinvitation" class="section-thumbnail" data-video-link="{{con.video_link}}">
                                            <div class="play-button" data-vlink="{{con.video_link}}"></div><img src="{{con.thumbnail_link}}" alt="">
                                        </div>
                                        <div ng-if="!showsingleactivity.isinvitation" class="section-ratings">
                                            <div class="likes-ratings"><div class="like-button"  ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                                            <div class="rank">Rank #{{con.rank}}</div>
                                        </div>
                                    </div><div ng-if="!showsingleactivity.isinvitation" class="section-options-button-wrapper">
                                        <div class="section-options-button" ng-click="expandvideo(con)"></div>
                                    </div>
                                </div>

                            </div>
                            <div class="oc_response_wrapper" ng-show="showsingleactivity.contestants_info.length > 1">
                                <div class="activity-divider">Response</div>

                                <div class="contestant-section" ng-repeat="con in showsingleactivity.contestants_info" ng-if="$index > 0">
                                    <div class="section-badge">
                                        <div class="section-avatar" ng-click="getprofile(con.contestant_username,true)">
                                            <img src="{{con.avatar_link}}" alt="">
                                        </div>
                                        <div class="section-username">{{con.contestant_username}}</div>
                                    </div><div ng-click="playvideo(con.video_link)"  ng-if="!showsingleactivity.isinvitation" class="section-thumbnail-and-ratings">
                                        <div class="section-thumbnail" data-video-link="{{con.video_link}}">
                                            <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                            <img src="{{con.thumbnail_link}}" alt="">
                                        </div><div ng-if="!showsingleactivity.isinvitation" class="section-ratings">
                                            <div class="likes-ratings"><div class="like-button"  ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                                            <div class="rank">Rank #{{con.rank}}</div>
                                        </div>
                                    </div><div ng-if="!showsingleactivity.isinvitation" class="section-options-button-wrapper">
                                        <div class="section-options-button"  ng-click="expandvideo(con)"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="activity-footer">
                            <div class="activity-description">{{showsingleactivity.activity_description}}</div>
                            <div class="activity-options-button" ng-if="!showsingleactivity.isinvitation" ng-click="bd.expandfeed(showsingleactivity.id);"></div>
                        </div>
                    </div>
                    <div class="activity-wrapper" ng-if="showsingleactivity.activity_type == 'bracket'">
                        <div class="activity-header">
                            <div class="activity-host-avatar" ng-click="getprofile(showsingleactivity.activity_host_info.username,true)">
                                <img src="{{showsingleactivity.activity_host_info.avatar_link}}" alt="">
                            </div>
                            <div class="activity-header-txt">
                                <div class="activity-header-txt-top-section">
                                    <div class="host-username">{{showsingleactivity.activity_host_info.username}}</div><div class="activity-date">{{showsingleactivity.activity_date}}</div>
                                </div>
                                <div class="activity-title">{{showsingleactivity.activity_title}}</div><div class="activity-type"> ({{showsingleactivity.activity_category}} / {{showsingleactivity.activity_type}})</div>
                            </div>
                        </div>
                        <div class="activity-divider">Round {{showsingleactivity.activity_round}}</div><div class="activity-body">
                            <div ng-repeat="all in showsingleactivity.contestants_info">
                                <div class="bracket-section" ng-if="$index % 2 === 0" ng-init="group = showsingleactivity.contestants_info.slice($index, $index + 2)">
                                    <div class="bracket-section-content-wrapper">
                                        <div ng-repeat="con in group">
                                            <div class="bracket-section-content">
                                                <div class="bracket-section-avatar-wrapper" ng-click="getprofile(con.contestant_username,true)">
                                                    <div class="bracket-section-avatar">
                                                        <img src="{{con.avatar_link}}">
                                                    </div>
                                                    <div class="bracket-section-username">{{con.contestant_username}}</div>
                                                </div><div ng-click="playvideo(con.video_link)"  ng-if="!showsingleactivity.isinvitation" class="bracket-section-thumbnail">
                                                    <div class="play-button" data-vlink="{{con.avatar_link}}"></div>
                                                    <img src="{{con.thumbnail_link}}" alt="">
                                                </div>
                                                <div ng-if="!showsingleactivity.isinvitation" class="bracket-section-ratings" ng-click="bd.likevideo(f.activity_id,con.video_id)">
                                                    <div class="likes-ratings" >
                                                        <div class="like-button"  ></div>
                                                        <div class="like-count">{{con.likes}}</div>
                                                    </div>
                                                </div><div ng-if="!showsingleactivity.isinvitation" class="bracket-section-options-button-wrapper">
                                                    <div class="bracket-section-options-button"></div>
                                                </div>


                                            </div>


                                        </div>
                                    </div>
                                    <div class="bracket-section-frame"></div>
                                </div>

                            </div>

                        </div>

                        <div class="activity-footer"  >
                            <div class="activity-description">{{showsingleactivity.activity_description}}</div>
                            
                            <div class="activity-options-button" ng-if="!showsingleactivity.isinvitation" ng-click="bd.expandfeed(showsingleactivity.id);"></div>
                        </div>
                    </div>
                    <div class="activity-wrapper" ng-if="showsingleactivity.activity_type == 'exhibition'">

                        <div class="activity-header">
                            <div class="activity-host-avatar" ng-click="getprofile(showsingleactivity.activity_host_info.username,true)">
                                <img src="{{showsingleactivity.activity_host_info.avatar_link}}" alt="">
                            </div>
                            <div class="activity-header-txt">
                                <div class="activity-header-txt-top-section">
                                    <div class="host-username">{{showsingleactivity.activity_host_info.username}}</div>
                                    <div class="activity-date">{{showsingleactivity.activity_date}}</div>
                                </div><div class="activity-title">{{showsingleactivity.activity_title}}</div>
                                <div class="activity-type"> ({{showsingleactivity.activity_category}} / {{showsingleactivity.activity_type}})</div>
                            </div>
                        </div>
                        <div class="activity-body" ng-repeat="con in f.contestants_info">

                            <div ng-click="playvideo(con.video_link)"  ng-if="!showsingleactivity.isinvitation" class="exhibition-thumbnail">
                                <div class="play-button" data-vlink="{{con.video_link}}"></div>
                                <img src="{{con.thumbnail_link}}">
                            </div>
                            <div class="likes-ratings"><div class="like-button"  ng-click="bd.likevideo(f.activity_id,con.video_id)"></div><div class="like-count">{{con.likes}}</div></div>
                        </div><div class="activity-footer">
                            <div class="activity-description">{{con.thumbnail_link}}</div>
                            <div class="activity-options-button" ng-show="!showsingleactivity.isinvitation"></div>
                        </div>
                    </div>

</div>
                    <div class="tab-bar" ng-show="showsingleactivity.isinvitation">
                        <label class="tab-bar__item btnaccept" ng-click="invitationrespond(true,'accept',showsingleactivity.activity_id)">
                            <input type="radio" name="tab-bar-a">
                            <button class="tab-bar__button">
                                <i class="tab-bar__icon fa fa-check"></i>
                                <div class="tab-bar__label">Accept</div>
                            </button>
                        </label>

                        <label class="tab-bar__item btndecline"  ng-click="invitationrespond(true,'decline',showsingleactivity.activity_id)">
                            <input type="radio" name="tab-bar-a">
                            <button class="tab-bar__button">
                                <i class="tab-bar__icon fa fa-times"></i>
                                <div class="tab-bar__label">Decline</div>
                            </button>
                        </label>

                    </div>
                <div class="bottomgap"></div>
</ons-page>
        </ons-template>

        <ons-template id="ForgotPassword.html">
            <ons-page>
                <div class="headergap"></div>
                <ons-row>
                    <ons-col>
                        <div class="login-form">
                            <input type="email" class="text-input--underbar" ng-model="forgotemail.email" placeholder="Email">
                            
                            <br><br>
                            <ons-button modifier="large" class="login-button" ng-click="forgotpassword()">Send Reset Link</ons-button>
                            <br><br>
                        </div>

                    </ons-col>
                </ons-row>
                <div class="bottomgap"></div>
            </ons-page>
        </ons-template>

        <ons-template id="Explore.html">
            <ons-page>
                <ons-row>
                    <ons-col>
                        Explore Content
                    </ons-col>
                </ons-row>
            </ons-page>
        </ons-template>

        <ons-template id="Search.html">
            <ons-page>
                <div class="headergap"></div>
                <ons-row>
                    <ons-col>
                        <div ng-show="(searchresult.people.length==0 && searchresult.activity.length == 0) || searchquery.q.toString().length ==0" style="text-align:center;">
                            <ons-icon icon="fa-search" style="opacity:0.1" size="100px"></ons-icon>
                            <br />
                            <br /><span style="opacity:0.4">search for people or activities</span>
                        </div>
                        <div style="text-align:center" ng-show ="searchquery.q.toString().length >0">
                            <div class="main-search-content-wrapper">
                                <div ng-show="searchresult.people.length >0">
                                    <div class="main-search-divider">People</div>
                                    <div class="main-search-content">
                                        <div class="main-search-list-wrapper" ng-repeat="user in searchresult.people" ng-click="getprofile(user.Username,true)">
                                            <div class="main-search-list-avatar">
                                                <img src="{{user.Avatar_link}}" alt="">
                                            </div>
                                            <div class="main-search-list-content">
                                                <div class="main-search-list-content-fullname">{{user.Fullname}}</div>
                                                <div class="main-search-list-content-username">{{user.Username}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-show="searchresult.activity.length >0">
                                    <div class="main-search-divider">Activities</div><div class="main-search-content">
                                        <div class="main-search-list-wrapper" ng-repeat="activity in searchresult.activity" ng-click="bd.getsingleactivity(activity.id,activity.title)">
                                            <div class="main-search-list-avatar">
                                                <img src="{{activity.Avatar_link}}" alt="">
                                            </div>
                                            <div class="main-search-list-content">
                                                <div class="main-search-list-content-first-row">
                                                    <div class="main-search-list-content-host">{{activity.Host_username}}</div><div>&nbsp;•&nbsp;</div>
                                                    <div class="main-search-list-content-date"></div>
                                                </div>
                                                <div class="main-search-list-content-title">{{activity.title}}</div>
                                                <div class="main-search-list-content-type-and-category">{{activity.category}}</div>
                                            </div>
                                        </div>
                                    </div><div class="main-search-expand"></div>
                                </div>


                            </div>
                        </div>

                    </ons-col>
                </ons-row>
                <div class="bottomgap"></div>
            </ons-page>
        </ons-template>

        <ons-template id="Panel.html">
            <ons-page>
                <ons-row>
                    <ons-col>
                        Panel Content
                    </ons-col>
                </ons-row>
            </ons-page>
        </ons-template>

        <ons-template id="popover.html">
            <ons-popover cancelable direction="up">
                <ons-list>

                    <ons-list-header>Select Category</ons-list-header>

                    <ons-list-item modifier="tappable" ng-repeat="option in cats">
                        <label class="radio-button radio-button--list-item">
                            <input type="radio" name="a" ng-model="NewActivity.category" value="{{ option }}" ng-click="popover.hide($event)">
                            <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                            {{ option }}
                        </label>
                    </ons-list-item>

                </ons-list>

            </ons-popover>
        </ons-template>

        <ons-template id="popovervisibility.html">
            <ons-popover cancelable direction="up">
                <ons-list>

                    <ons-list-header>Select Visibility</ons-list-header>

                    <ons-list-item modifier="tappable" ng-repeat="option in visibilityoptions">
                        <label class="radio-button radio-button--list-item">
                            <input type="radio" name="a" ng-model="NewActivity.visibility" value="{{ option }}" ng-click="popovervisibility.hide($event)">
                            <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                            {{ option }}
                        </label>
                    </ons-list-item>

                </ons-list>

            </ons-popover>
        </ons-template>

    <script type="text/ons-template" id="dialoguserreplace.html">
        <ons-dialog cancelable>
            <ons-list>
                <ons-list-header>
                    <div style="width:80%;display:inline;float:left;">
                        <input type="text" class="text-input" ng-model="searchuserquery.q" style="width:80%;float:right;display:inline;" placeholder="search for users">
                    </div>
                    <div style="width:20%;float:right;">
                        <button class="ng-hide" ng-click="searchuser(searchuserquery.q)"><ons-icon icon="fa-search"></ons-icon></button>
                    </div>
                </ons-list-header>
                
                <ons-list class="userlist" modifier="inset">
                    <ons-list-item value="{{ user.Username }}" ng-repeat="user in usersearchresult" modifier="tappable">
                        <label class="checkbox checkbox--noborder">
                            <input type="checkbox" ng-model="user.selected" ng-change="replaceuser($event,user)">
                            <div style="float:left;width:20%" class="checkbox__checkmark checkbox--noborder__checkmark"></div>
                            <div style="float:left; width:80%; max-width:80%;" ng-click=>
                                <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar"></div>
                                <div style="max-width:60%;float:left">
                                    {{user.Fullname}}
                                    <span class="subtext"> {{user.Username}}</span>
                                </div>
                            </div>

                        </label>

                    </ons-list-item>
                </ons-list>


            </ons-list>


        </ons-dialog>
    </script>

    <script type="text/ons-template" id="dialogaudiencerequests.html">
        <ons-dialog cancelable>
            <ons-list>
                <ons-list-header>
                    Join audience requests
                </ons-list-header>

                <ons-list class="userlist" modifier="inset">
                    <ons-list-item value="{{ user.Username }}" ng-repeat="r in bd.userinfo.join_audience_requests.obj" modifier="tappable">
                            <div style="float:left; width:100%; max-width:100%;">
                                <div style="width:15%;float:left">  <img src="{{r.avatar}}" class="avatar"></div>
                                <div style="width:50%;float:left">
                                    {{r.fullname}}
                                    <span class="subtext"> {{r.username}}</span>
                                </div>
                                <div style="max-width:20%;float:left;margin-left:3px" ><ons-button class="btnsmall button button--material btnsecond" style="max-height: 36px;" ng-click="acceptjoinaudience(r.username)"><ons-icon icon="fa-check"></ons-icon></ons-button></div>
                                &nbsp;<div style="max-width:20%;float:right;" ><ons-button class="btnsmall button button--material btnsecond"  style="max-height: 36px;" ng-click="declinejoinaudience(r.username)"><ons-icon icon="fa-times"></ons-icon></ons-button></div>
                            </div>
                      
                    </ons-list-item>
                </ons-list>


            </ons-list>


        </ons-dialog>
    </script>

    <ons-template id="popoveruserreplace.html">
        <ons-popover class="popsearchuser" cancelable direction="up">
            <ons-list>
                <ons-list-header>
                    <div style="width:80%;display:inline;float:left;">
                        <input type="text" class="text-input" ng-model="searchuserquery.q" style="width:80%;float:right;display:inline;" placeholder="search for users">
                    </div>
                    <div style="width:20%;float:right;">
                        <button class="ng-hide" ng-click="searchuser(searchuserquery.q)"><ons-icon icon="fa-search"></ons-icon></button>
                    </div>
                </ons-list-header>
                <ons-list class="userlist" modifier="inset" ng-repeat="user in usersearchresult">
                    <ons-list-item value="{{ user.Username }}" modifier="tappable">
                        <label class="checkbox checkbox--noborder">
                            <input type="checkbox" ng-model="user.selected" ng-change="replaceuser($event,user)">
                            <div style="float:left;width:20%" class="checkbox__checkmark checkbox--noborder__checkmark"></div>
                            <div style="float:left; width:80%; max-width:80%;" ng-click=>
                                <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar"></div>
                                <div style="max-width:60%;float:left">
                                    {{user.Fullname}}
                                    <span class="subtext"> {{user.Username}}</span>
                                </div>
                            </div>

                        </label>

                    </ons-list-item>
                </ons-list>


            </ons-list>

        </ons-popover>
    </ons-template>




    
        <ons-template id="popoverfileselect.html">
        <ons-popover class="popfileselect" cancelable direction="down" ons-preshow="getroot()" ng-controller="FileController as fc">
            <!--<button id="btnclosesearchuser" class="close" ng-click="bd.closepopselectuser()"><i class="fa-close"></i></button>-->

            <ons-list>

                <ons-list-header>
                    <div style="width:80%;display:inline;float:left;">
                        Select file
                    </div>
                </ons-list-header>
                <ons-list class="userlist" modifier="inset" ng-repeat="file in files">
                    <ons-list-item  modifier="tappable">
                        <div >
                            <a class="item item-icon-left" href="#" ng-click="fc.getContents(file.nativeURL)">
                                <i ng-show="file.isDirectory" class="icon ion-folder"></i>
                                <i ng-show="file.isFile" class="icon ion-document"></i>
                                {{file.name}}
                            </a>
                        </div>

                    </ons-list-item>
                </ons-list>


            </ons-list>

        </ons-popover>
    </ons-template>

        <ons-template id="popoveruserlist.html">
            <ons-popover class="popsearchuser" cancelable direction="up">
                <ons-list>
                    <ons-list class="userlist" modifier="inset" ng-repeat="user in userlist">
                        <ons-list-item value="{{ user.Username }}" ng-click="bd.selectuser($event,user.Username,user.Avatar_link,user.Fullname)" modifier="tappable">

                            <label class="checkbox checkbox--noborder">
                                <input type="checkbox">
                                <div style="float:left;width:20%" class="checkbox__checkmark checkbox--noborder__checkmark"></div>
                                <div style="float:left; width:80%; max-width:90%;">
                                    <div style="width:40%;float:left">  <img src="{{user.Avatar_link}}" class="avatar"></div>
                                    <div style="max-width:60%;float:left">
                                        {{user.Fullname}}
                                        <span class="subtext"> {{user.Username}}</span>
                                    </div>
                                </div>

                            </label>
                        </ons-list-item>
                    </ons-list>


                </ons-list>

            </ons-popover>
        </ons-template>

        <ons-template id="popoverbranchlength.html">
            <ons-popover cancelable direction="up">
                <ons-list>
                    <ons-list-header>
                        Select the number of contestants
                    </ons-list-header>
                    <ons-list-item style="min-height:50px" modifier="tappable">
                        <ons-list-item>

                            <ons-list-item style="min-height:50px" modifier="tappable" ng-repeat="len in branchlength">
                                <label class="radio-button radio-button--list-item">
                                    <input type="radio" name="a" ng-model="NewActivity.branchlength" value="{{ len }}">
                                    <div class="radio-button__checkmark radio-button--list-item__checkmark"></div>
                                    {{ len }}
                                </label>
                            </ons-list-item>

                </ons-list>

            </ons-popover>
        </ons-template>

        <ons-template id="NewActivity.html">
            <ons-page>
                <div class="headergap"></div>

                <div class="profilewrapper">
                    <ons-row>
                        <ons-col>
                            <ons-list ng-if="viewuserinfo.Username != bd.userinfo.Username">
                                <ons-list-item ng-if="!isusernameinarray(viewuserinfo.audience,bd.userinfo.Username)" ng-click="joinaudience(viewuserinfo.Username)" class="centered">
                                    <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                    Join Audience
                                </ons-list-item>
                                <ons-list-item ng-if="isusernameinarray(viewuserinfo.audience,bd.userinfo.Username)" ng-click="leaveaudience(viewuserinfo.Username)" class="centered">
                                    <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                    Leave Audience
                                </ons-list-item>
                            </ons-list>
                            <ons-list ng-if="viewuserinfo.Username == bd.userinfo.Username && bd.userinfo.join_audience_requests.count > 0">
                                <ons-list-item class="centered" style="font-size:small;" ng-click="dialogaudiencerequests.show()">
                                    <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                    You have {{bd.userinfo.join_audience_requests.count}} join audience request
                                </ons-list-item>
                            </ons-list>
                            <div class="profile-card">

                                <img src="{{bd.userinfo.Avatar_link}}" class="profile-image">
                                <div class="profile-name">{{bd.userinfo.Fullname}}</div>
                                <div class="profile-id">{{bd.userinfo.Username}}</div>
                                <div class="profileStats">Stats {{bd.userinfo.stats}} win(s)</div>
                                <div class="profile-desc">{{bd.userinfo.about}}</div>

                            </div>

                        </ons-col>
                    </ons-row>
                </div>
                <div class="tab-bar tab-bar--top">
                    <label class="tab-bar__item">
                        <input type="radio" name="tab-bar-c" ng-model="NewActivity.type" value="challenge" checked="checked">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Challenge</div>
                        </button>
                    </label>

                    <label class="tab-bar__item">
                        <input type="radio" name="tab-bar-c" ng-model="NewActivity.type" value="battle">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Battle</div>
                        </button>
                    </label>

                    <label class="tab-bar__item">
                        <input type="radio" name="tab-bar-c" ng-model="NewActivity.type" value="bracket">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Bracket</div>
                        </button>
                    </label>
                    <label class="tab-bar__item">
                        <input type="radio" name="tab-bar-c" ng-model="NewActivity.type" value="exhibition">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">Exhibition</div>
                        </button>
                    </label>
                </div>
                <div class="demo-content contentwrapper" ng-show="(NewActivity.type =='challenge' || NewActivity.type == 'exhibition') && isuploading ==1">
                    There is an activity upload in progress, please come back later
                    </div>
                    <div class="demo-content contentwrapper" ng-hide="(NewActivity.type =='challenge'  || NewActivity.type == 'exhibition') && isuploading==1">
                        <div ng-show="NewActivity.type!=''">
                            <div class="error" ng-if="newactivityvalidation.status==false">{{newactivityvalidation.reason}}</div>
                            <div style="text-align: center; padding: 10px 0;">
                                <div >
                                    <input type="text" class="text-input centered" required style="width:95%"
                                           placeholder="Title" ng-model="NewActivity.title" value="">
                                </div>
                            </div>
                            
                            <div style="text-align: center; padding: 10px 0;">
                                    <textarea class="text-input" required style="width:95%;height:70px;"
                                          placeholder="Description" ng-model="NewActivity.description" value=""></textarea>
                            </div>
                            <div style="text-align: center; padding: 10px 0;">
                                <ons-botton class="button button--material btnsecond btnwide" modified="small" ng-click="dialogduration.show($event)">
                                    <div style="float:left">Duration: {{NewActivity.duration}}</div><div style="float:right"> <ons-icon icon="fa-angle-down"></ons-icon></div>
                                </ons-botton>
                            </div>
                            <div style="text-align: center; padding: 10px 0;">
                                <ons-botton class="button button--material btnsecond btnwide" modified="small" ng-click="dialogcategory.show($event)">
                                    <div style="float:left"> {{NewActivity.category}}</div><div style="float:right"> <ons-icon icon="fa-angle-down"></ons-icon></div>
                                </ons-botton>
                            </div>
                            <div style="text-align: center; padding: 10px 0;">
                                <ons-botton class="button button--material btnsecond btnwide" modified="small" ng-click="dialogvisibility.show($event)">
                                    <div style="float:left"> {{NewActivity.visibility}} </div>
                                    <div style="float:right"><ons-icon icon="fa-angle-down"></ons-icon></div>
                                </ons-botton>
                            </div>
                        </div>
                        <div ng-show="NewActivity.type=='challenge' || NewActivity.type == 'exhibition' ">

                            <div class="container" ng-show="isuploading !=1" style="text-align: center; padding: 10px 0;">
                                <input  class="cropit-image-input" type="file" accept="video/*" id="inputupload" onchange="angular.element(this).scope().setFiles(this, false,true,'activity')" />
                                <ons-botton ng-if="!version44 && !file" class="button button--material btnsecond btnwide"  ng-click="triggervideoupload()">Select Video</ons-botton>
                                <button ng-if="version44 && !file" ng-click="selectfile()" style="height:30px;">Choose File.</button>


                                <button ng-show="file && uploadbutton" class="button button--material btnsecond btnwide" ng-click="triggervideoupload()">Selected {{file}}</button>
                                <button ng-show="file && !uploadbutton" class="button btnsmall">{{file}}</button>
                            </div>
                            <div class="container" ng-show="isuploading == 1">
                                There is an upload in progress please come back later.
                            </div>

                        </div>
                        <div ng-show="NewActivity.type=='battle'">
                            <div style="text-align: center; padding: 10px 0;">
                                <input type="hidden" id="drpselectusers" tabindex="1" class="select2">
                                <ons-botton class="button button--material btnsecond btnwide" modified="small" ng-click="bd.popselectuser($event,$parent.$index,$index)">
                                    <div ng-if="NewActivity.contestants.length > 0" style="float:left;">
                                        <div>

                                            <ons-icon size="18" icon="fa-group"></ons-icon>{{NewActivity.contestants.length + ' ' }} Contestants Selected
                                        </div>
                                    </div>
                                    <div style="float:left;" ng-if="NewActivity.contestants.length == 0"> Select Contestants</div>
                                    <div style="float:right;"> <ons-icon icon="fa-angle-down"></ons-icon></div>
                                </ons-botton>
                            </div>


                        </div>
                        <div ng-show="NewActivity.type=='bracket'">

                            <div style="text-align: center; padding: 10px 0;">
                                <div style="text-align: center; padding: 10px 0;">
                                    <ons-botton class="button button--material btnsecond btnwide" modified="small" ng-click="dialogbranchlength.show($event)">
                                        <div style="float:left;">Number of Contestants: {{NewActivity.branchlength}} </div>
                                        <div style="float:right;"><ons-icon icon="fa-angle-down"></ons-icon></div>
                                    </ons-botton>
                                </div>
                                <div>
                                    <div ng-repeat="b in NewActivity.branches">
                                        <div>Branch {{b.branch_no}}</div>
                                        <div ng-repeat="u in b.contestants">
                                            <ons-botton class="button button--material btnsecond btnwide" modified="small"
                                                        ng-click="bd.popselectuser($event,$parent.$index,$index)">
                                                <div style="max-height:30px;float:left;width:70%" class="userlist">
                                                    <div ng-if="u.Username.length > 0" style="width:100%;float:left;">
                                                        <div style="width:25%;float:left">
                                                            <img src="{{u.Avatar_link}}" class="avatar">
                                                        </div>
                                                        <div style="width:60%;float:left">
                                                            {{u.Fullname}}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-if="u.Username.length == 0" style="float:left;">
                                                    Select User
                                                </div>
                                                <div style="float:right;"><ons-icon icon="fa-angle-down"></ons-icon></div>
                                            </ons-botton>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div ng-show="NewActivity.type!=''">
                            <div style="text-align: center; padding: 10px 0;">
                                <ons-botton class="button button--material btnwide " ng-click="bd.addactivity()" modified="small">
                                    Create Activity
                                </ons-botton>
                            </div>
                            <div style="text-align: center; padding: 10px 0;">
                                <ons-botton class="button button--material btnsecond btnwide" modified="small">
                                    Cancel
                                </ons-botton>
                            </div>
                        </div>
                        <div class="subtext" style="font-size:1.4em;text-align:center;" ng-show="NewActivity.type==''">
                            Please select activity type.

                        </div>
                    </div>


<div class="bottomgap"></div>
</ons-page>
        </ons-template>

        <ons-template id="ActivityLog.html">
            <ons-page>
                <ons-row>
                    <ons-col>
                        Activity Log
                    </ons-col>
                </ons-row>
            </ons-page>
        </ons-template>

        <ons-template id="ActivityInProgress.html">
            <ons-page>
                <ons-row>
                    <ons-col>
                        ActivityInProgress
                    </ons-col>
                </ons-row>
            </ons-page>
        </ons-template>
     
        <ons-bottom-toolbar  class="bottomtoolbar centered slide-right" ng-class="result.css" ng-show="result.id !=0">
            <ons-gesture-detector ng-swiperight="confirmresult()"  ng-swipeleft="confirmresult()">
                <ons-row class="centered" id="resulttoolbar" >
                    <ons-col>
                        <ons-icon icon="{{result.id == 1 ? 'fa-check' : 'fa-times'}}"></ons-icon>
                        <div style="display: inline-block;">
                            {{result.msg}}
                            <button class="button btnxsmall ng-hide" ng-click="confirmresult()">Ok</button>
                        </div>

                    </ons-col>
                </ons-row>
            </ons-gesture-detector>
        </ons-bottom-toolbar>
   
        <ons-bottom-toolbar id="uploadtoolbar" class="bottomtoolbar centered" ng-show="isuploading !=0" ng-class="isuploading == 2? 'successtoolbar' : ''">
        <ons-row>
        <ons-col >
            <ons-icon icon="fa-upload"></ons-icon> 
                <div style="display: inline-block;"> 
                    {{isuploading ==1 ? 'Uploads are in progress. ' + uploadprogress :''}}
                    {{isuploading ==-1 ? 'Uploads failed.' :''}}
                    {{isuploading ==2 ? 'Uploads Completed successfuly.' : ''}}
                    <button class="button btnxsmall" ng-if="isuploading ==2" ng-click="confirmupload('preview')">Preview</button>   
                    <button class="button btnxsmall ng-hide" ng-if="isuploading ==1" ng-click="confirmupload('cancel')">Cancel</button>
                    <button class="button btnxsmall" ng-if="isuploading ==-1" ng-click="confirmupload('delete')">Ok</button>
                </div>
                
            </ons-col>
        </ons-row>
    </ons-bottom-toolbar>
    

    <ons-template id="myfeed.html">
        <ons-page>
            <div class="headergap"></div>
            <div class="profilewrapper">
                <ons-row>
                    <ons-col>
                        <ons-list ng-if="viewuserinfo.Username != bd.userinfo.Username">
                            <ons-list-item ng-if="!isusernameinarray(viewuserinfo.audience,bd.userinfo.Username)" ng-click="joinaudience(viewuserinfo.Username)" class="centered">
                                <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                Join Audience
                            </ons-list-item>
                            <ons-list-item ng-if="isusernameinarray(viewuserinfo.audience,bd.userinfo.Username)" ng-click="leaveaudience(viewuserinfo.Username)" class="centered">
                                <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                Leave Audience
                            </ons-list-item>
                        </ons-list>
                        <ons-list ng-if="viewuserinfo.Username == bd.userinfo.Username && bd.userinfo.join_audience_requests.count > 0">
                            <ons-list-item class="centered"  style="font-size:small;" ng-click="dialogaudiencerequests.show()">
                                <ons-icon icon="ion-android-person-add" size="28px"></ons-icon>
                                You have {{bd.userinfo.join_audience_requests.count}} join audience request
                            </ons-list-item>
                        </ons-list>
                        <div class="profile-card">

                            <img src="{{viewuserinfo.Avatar_link}}" class="profile-image">
                            <div class="profile-name">{{viewuserinfo.Fullname}}</div>
                            <div class="profile-id">{{viewuserinfo.Username}}</div>
                            <div class="profileStats">Stats {{bd.userinfo.stats}} win(s)</div>
                            <div class="profile-desc">{{viewuserinfo.about}}</div>

                        </div>
                        <div class="tab-bar tab-bar--top" ng-show="viewuserinfo.Username != bd.userinfo.Username">
                            <label class="tab-bar__item">
                                <input type="radio" name="tab-bar-c" ng-model="viewuserinfo.mode" value="1" checked="checked">
                                <button class="tab-bar__button">
                                    <div class="tab-bar__label">Bio</div>
                                </button>
                            </label>

                            <label class="tab-bar__item">
                                <input type="radio" name="tab-bar-c" ng-model="viewuserinfo.mode" value="2">
                                <button class="tab-bar__button">
                                    <div class="tab-bar__label">Audience</div>
                                </button>
                            </label>

                            <label class="tab-bar__item">
                                <input type="radio" name="tab-bar-c" ng-model="viewuserinfo.mode" value="3">
                                <button class="tab-bar__button">
                                    <div class="tab-bar__label">Activities</div>
                                </button>
                            </label>
                        </div>

                    </ons-col>
                </ons-row>
            </div>
                <div data-role="content" class="demo-content">
                <div style="opacity:0.5; text-align:center; margin-top:50px;" ng-show="viewuserinfo.feedinprogress.length==0">
                    No Activities to show
                </div>
                <input type="file" accept="video/*" class="cropit-image-input" id="inputuploadprogress"
                       onchange="angular.element(this).scope().setFiles(this,false,true,'progress')" />
                <div ng-repeat="f in viewuserinfo.feedinprogress.obj">
                    <div class="aip-wrapper"  ng-if="f.activity_type == 'bracket'">
                    <div class="aip-header">
                        <div class="aip-host-avatar" ng-click="getprofile(f.activity_host_info.username,true)">
                        <img src="{{f.activity_host_info.avatar_link}}" alt=""></div>
                        <div class="aip-header-txt">
                        <div class="aip-header-txt-top-section">
                        <div class="aip-host-username">{{f.activity_host_info.username}}</div><div class="aip-date">{{f.activity_date}}</div></div>
                        <div class="aip-title">{{f.activity_title}}</div><div class="aip-type"> ({{f.activity_category}} / {{f.activity_type}})</div></div></div>
                    <div class="aip-divider">Round {{f.activity_round}}</div>
                    <div class="aip-body" ng-repeat="all in f.contestants_info">
                        <div class="aip-bracket-section" ng-if="$index % 2 === 0" ng-init="group = f.contestants_info.slice($index, $index + 2)" >
                        <div class="aip-bracket-section-content-wrapper" >
                            <div class="aip-bracket-section-content" ng-repeat="con in group">
                            <div class="aip-bracket-section-avatar-wrapper"  ng-click="getprofile(con.contestant_username,true)">
                                <div class="aip-bracket-section-avatar">
                                <img src="{{con.avatar_link}}"></div>
                            <div class="aip-bracket-section-username">{{con.contestant_username}}</div></div>
                                <div  ng-if="con.thumbnail_link.length > 0" ng-click="playvideo(con.video_link)" class="aip-thumbnail">
                                    <div class="play-button" data-vlink="{{con.avatar_link}}"></div>
                                    <img src="{{con.thumbnail_link}}" alt="">
                                </div>
                                <div ng-if="con.thumbnail_link.length == 0 && !version44 && !file && con.contestant_username == bd.userinfo.Username" 
                                     class="aip-thumbnail" 
                                     ng-click="triggerprogressupload(f.activity_id)">
                                    <div class="upload-video-button">
                                        Upload Video
                                    </div>
                                </div>
                                <div ng-if="con.thumbnail_link.length == 0 && version44 && !file && con.contestant_username == bd.userinfo.Username"
                                     class="aip-thumbnail"
                                     ng-click="selectfile(f.activity_id)">
                                    <div class="upload-video-button">
                                        Upload Video
                                    </div>
                                </div>
                                <div ng-if="con.thumbnail_link.length == 0 && !version44 && !file && con.contestant_username != bd.userinfo.Username"
                                     class="aip-thumbnail">
                                    <div class="upload-video-button">
                                    {{con.invitation_status=='a'? 'Invitation Pending' : 'Waiting Video'}}
                                    </div>


                                </div>
                                <div ng-if="con.invitation_status =='a'" class="aip-contestant-options-button"  ng-click="startreplaceuser($event,con,f.activity_id)"></div>
                              
                            </div>

                            
                                                   </div>
                            <div class="aip-bracket-section-frame"></div>
                        </div>

                        </div>
                    
                    <div class="aip-footer" ng-click="bd.expandfeed(f.activity_id,true);">
                        <div class="aip-description">{{f.activity_description}}</div>
                        <div class="aip-options-button" data-activity-type="bracket" data-activity-host="mosta2" ng-click="bd.expandfeed(f.activity_id,true);"></div>
                        </div>
                    </div>


                    <div class="aip-wrapper" ng-if="f.activity_type == 'battle'">
                    <div class="aip-header">
                        <div class="aip-host-avatar"  ng-click="getprofile(f.activity_host_info.username,true)">
                        <img src="{{f.activity_host_info.avatar_link}}" alt=""></div>
                        <div class="aip-header-txt"><div class="aip-header-txt-top-section">
                            <div class="aip-host-username">{{f.activity_host_info.username}}</div>
                            <div class="aip-date">{{f.activity_date}}</div></div>
                        <div class="aip-title">{{f.activity_title}}</div>
                        <div class="aip-type"> ({{f.activity_category}} / {{f.activity_type}})</div></div></div>
                        <div class="aip-body">
                            <div class="aip-section" ng-repeat="con in f.contestants_info">
                                
                                <div ng-if="con.thumbnail_link.length > 0" ng-click="playvideo(con.video_link)" class="aip-thumbnail">
                                    <div class="play-button" data-vlink="{{con.avatar_link}}"></div>
                                    <img src="{{con.thumbnail_link}}" alt="">
                                </div>
                                <div ng-if="con.thumbnail_link.length == 0 && !version44 && !file && con.contestant_username == bd.userinfo.Username"
                                     class="aip-thumbnail"
                                     ng-click="triggerprogressupload(f.activity_id)">
                                    <div class="upload-video-button">
                                        Upload Video
                                    </div>
                                </div>
                                <div ng-if="con.thumbnail_link.length == 0 && version44 && !file && con.contestant_username == bd.userinfo.Username"
                                     class="aip-thumbnail"
                                     ng-click="selectfile(f.activity_id)">
                                    <div class="upload-video-button">
                                        Upload Video
                                    </div>
                                </div>
                                <div ng-if="con.thumbnail_link.length == 0 && !version44 && !file && con.contestant_username != bd.userinfo.Username"
                                     class="aip-thumbnail">
                                    <div class="upload-video-button">
                                        {{con.invitation_status=='a'? 'Invitation Pending' : 'Waiting Video'}}
                                    </div>


                                </div>

                                <div class="aip-section-badge">
                                    <div class="aip-section-avatar">
                                        <img ng-click="getprofile(con.contestant_username,true)"
                                             src="{{con.avatar_link}}" alt="">
                                    </div>
                                    <div class="aip-section-username">{{con.contestant_username}}</div>
                                </div>
                                <div class="vs-divider" ng-show="f.contestants_info.length ==2 && $index ==0"><div>VS</div></div>
                            </div>

                            <div class="aip-footer" ng-click="bd.expandfeed(f.activity_id,true);">
                                <div class="aip-description">{{f.activity_description}}</div>
                                <div class="aip-options-button" data-activity-type="bracket" data-activity-host="mosta2" ng-click="bd.expandfeed(f.activity_id,true);"></div>
                            </div>
                        </div>
                    </div>


                            </div>
                            <div class="activity-title"></div>
                            <div class="activity-type"></div>
                        </div>
                <div style="text-align:center; margin-top:20px;" ng-if="feed.hasmore">
            <ons-button class="btnsmall button button--material btnsecond" ng-click="bd.getactivityinprogress(bd.userinfo.Username, false, 'Activities in progress', feedlimit+10)">Load more</ons-button>
                </div>
            <div class="bottomgap"></div>
        </ons-page>
    </ons-template>


    <ons-template id="Compose.html">
        <ons-page>
            <div class="headergap"></div>
            <div class="demo-content contentwrapper">
                <div class="header">Compose Message <ons-icon icon="fa-arrow-left"  class="pull-left ng-hide" ng-click="getmessages()"></ons-icon></div>
                <br />
                <div class="centered">
                    <ons-botton class="button button--material btnsecond btnwide" modified="small"
                            style="margin-left: 6px;"    ng-click="dialogusertomessage.show($event)">
                        <div style="max-height:30px;float:left;" class="userlist">
                            <div ng-if="compose.to.length == 0" style="width:100%;float:left;">
                                Select Recipient(s)
                            </div>
                            
                            <div ng-if="compose.to.length > 0" style="max-width:100%;float:left;overflow:scroll;">
                                <div style="float:left" ng-repeat="u in compose.to">
                                    <img src="{{u.Avatar_link}}" style="float:left" class="avatar">
                                    <span style="float:left">{{u.Fullname}}</span>
                                    
                                </div>
                                <div style="max-width:60%;float:left">
                                    {{u.Fullname}}
                                </div>
                            </div>
                        </div>
                        <div ng-if="u.Username.length == 0" style="float:left;">
                            Select User
                        </div>
                        <div style="float:right;"><ons-icon icon="fa-angle-down"></ons-icon></div>
                    </ons-botton>

                </div>
                <div class="comment-input-wrapper">
                    <div style="width:100%;">
                            <textarea data-id="5" ng-model="compose.message" class="comment-input" placeholder="message..."></textarea>
                        
                    </div>
                    <div class="centered"  style="width:100%;"><button class="button button--material  btnwide" style="color:white !important;" ng-click="sendmessage()">Send Message</button></div>
                    <br /><br />
                    <div class="centered" style="width:100%;"><button class="button button--material btnsecond btnwide" ng-click="sendmessage()">Cancel</button></div>
                </div>
            </div>
            <div class="bottomgap"></div>
        </ons-page>
    </ons-template>

</body>
</html> 